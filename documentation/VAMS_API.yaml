openapi: "3.0.1"
info:
    title: "Amazon Visual Asset Management System API"
    version: "2022-01-27 01:29:36UTC"
servers:
    - url: "{apiGatewayUrl}"
      variables:
          apiGatewayUrl:
              default: ""
paths:
    /api/amplify-config:
        get:
            summary: "Get secure configuration."
            responses:
                "200":
                    description: OK.
                "500":
                    description: Internal server error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
    /api/version:
        get:
            summary: "Get VAMS version information."
            description: "Returns the current version of the Visual Asset Management System. This endpoint is unauthenticated and can be used for health checks or version verification."
            responses:
                "200":
                    description: Version information retrieved successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    version:
                                        type: string
                                        description: "Current VAMS version"
                                        example: "2.2.0"
                                required:
                                    - version
                "500":
                    description: Internal server error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
    /assets:
            put:
                summary: "Create or update an asset."
                requestBody:
                    required: true
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/asset'
                responses:
                    "200":
                        description: OK
                    "400":
                        description: Invalid parameters.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
                    "404":
                        description: Database not found.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
                    "500":
                        description: Error processing request.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
            get:
                summary: "List all assets."
                responses:
                    "200":
                        description: OK
                        content:
                            application/json:
                                schema:
                                    type: object
                                    properties:
                                        assets:
                                            type: array
                                            items:
                                                $ref: "#/components/schemas/asset"
                    "500":
                        description: Error processing request.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
    /assets/all:
            put:
                summary: "Create or update one or multiple assets."
                requestBody:
                    required: true
                    content:
                        application/json:
                            schema:
                                type: object
                                items:
                                    $ref: "#/components/schemas/asset"
                responses:
                    "200":
                        description: OK
                    "400":
                        description: Invalid parameters.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
                    "404":
                        description: Database not found.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
                    "500":
                        description: Error processing request.
                        content:
                            application/json:
                                schema:
                                    $ref: '#/components/schemas/error'
    /asset-links:
        post:
            summary: "Create a new asset link."
            description: "Create a new asset link between two assets with relationship type and optional metadata. Supports 'related' and 'parentChild' relationship types with cycle detection."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createAssetLinkRequest"
            responses:
                "200":
                    description: Asset link created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/createAssetLinkResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/asset-links:
        get:
            summary: "Get asset links for a specific asset."
            description: "Retrieve all asset links (related, parents, children) for a specific asset. Supports optional tree view for hierarchical display of parent-child relationships."
            responses:
                "200":
                    description: Asset links retrieved successfully.
                    content:
                        application/json:
                            schema:
                                oneOf:
                                  - $ref: "#/components/schemas/getAssetLinksResponse"
                                  - $ref: "#/components/schemas/getAssetLinksTreeViewResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view asset links.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "databaseId"
                in: "path"
                description: "Database ID for the asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "childTreeView"
                in: "query"
                description: "Whether to return children as a tree structure."
                required: false
                schema:
                    type: boolean
                    default: false
            security:
              - DefaultCognitoAuthorizer: []
    /asset-links/single/{assetLinkId}:
        get:
            summary: "Get a single asset link by ID."
            description: "Retrieve details of a specific asset link by its unique identifier."
            responses:
                "200":
                    description: Asset link retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getSingleAssetLinkResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /asset-links/{assetLinkId}:
        put:
            summary: "Update an asset link."
            description: "Update an existing asset link. Currently only tags can be updated."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateAssetLinkRequest"
            responses:
                "200":
                    description: Asset link updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/updateAssetLinkResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /asset-links/{relationId}:
        delete:
            summary: "Delete an asset link."
            description: "Delete an asset link by its unique identifier. Also removes associated metadata."
            responses:
                "200":
                    description: Asset link deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/deleteAssetLinkResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "relationId"
                in: "path"
                description: "Unique identifier for asset link (name kept for backwards compatability for CDK deployment, actually is assetLinkId)."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /asset-links/{assetLinkId}/metadata:
        get:
            summary: "Get metadata for an asset link."
            description: "Retrieve all metadata associated with a specific asset link with pagination support."
            responses:
                "200":
                    description: Metadata retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getAssetLinkMetadataResponse"
                "400":
                    description: Invalid parameters or pagination token.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view metadata for this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create metadata for an asset link (bulk operation)."
            description: "Add new metadata items to a specific asset link. Supports bulk creation of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createAssetLinkMetadataRequest"
            responses:
                "200":
                    description: Metadata creation completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create metadata for this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update metadata for an asset link (bulk operation)."
            description: "Update existing metadata items for a specific asset link. Supports two update modes: UPDATE (default, upserts provided metadata) and REPLACE_ALL (replaces all metadata with provided items, requires PUT+POST+DELETE permissions). Returns partial success information if some items fail. REPLACE_ALL mode includes automatic rollback on failure."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateAssetLinkMetadataRequest"
            responses:
                "200":
                    description: Metadata update completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update metadata for this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete metadata for an asset link (bulk operation)."
            description: "Remove metadata items from an asset link. Supports bulk deletion of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteAssetLinkMetadataRequest"
            responses:
                "200":
                    description: Metadata deletion completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete metadata for this asset link.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset link not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetLinkId"
                in: "path"
                description: "Unique identifier for asset link."
                required: true
                schema:
                    $ref: "#/components/schemas/uuid_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /auth/constraints:
        get:
            summary: "List all constraints."
            description: "Retrieve a paginated list of all authorization constraints. Constraints define fine-grained access control rules based on object attributes and user/group permissions."
            responses:
                "200":
                    description: Constraints retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/getConstraintsResponse'
                "400":
                    description: Invalid pagination parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list constraints.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - $ref: '#/components/parameters/maxItemsParam'
                - $ref: '#/components/parameters/pageSizeParam'
                - $ref: '#/components/parameters/startingTokenParam'
            security:
            - DefaultCognitoAuthorizer: []    
    /auth/constraints/{constraintId}/:
        get:
            summary: "Get a specific constraint."
            description: "Retrieve details of a specific authorization constraint by its ID."
            responses:
                "200":
                    description: Constraint retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/getConstraintResponse'
                "400":
                    description: Invalid constraint ID.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view this constraint.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Constraint not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "constraintId"
                in: "path"
                description: "Unique identifier for constraint."
                required: true
                schema:
                    $ref: '#/components/schemas/object_name_pattern_regex'
            security:
            -   DefaultCognitoAuthorizer: []
        post:
            summary: "Create or update a constraint."
            description: "Create a new constraint or update an existing one. Constraints define fine-grained access control rules with criteria (AND/OR logic) and permissions for groups/users. At least one criteria (criteriaAnd or criteriaOr) must be provided."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/createConstraintRequest'
            parameters:
            - name: "constraintId"
              in: "path"
              description: "Unique identifier for constraint. If provided in path, overrides identifier in request body."
              required: true
              schema:
                $ref: '#/components/schemas/object_name_pattern_regex'
            responses:
                "200":
                    description: Constraint created/updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/constraintOperationResponse'
                "400":
                    description: Invalid parameters, missing required criteria, or role does not exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create/update constraints.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
            -   DefaultCognitoAuthorizer: []
        put:
            summary: "Create or update a constraint."
            description: "Create a new constraint or update an existing one. Constraints define fine-grained access control rules with criteria (AND/OR logic) and permissions for groups/users. At least one criteria (criteriaAnd or criteriaOr) must be provided. PUT method is treated the same as POST for constraints."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/createConstraintRequest'
            parameters:
            - name: "constraintId"
              in: "path"
              description: "Unique identifier for constraint. If provided in path, overrides identifier in request body."
              required: true
              schema:
                $ref: '#/components/schemas/object_name_pattern_regex'
            responses:
                "200":
                    description: Constraint created/updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/constraintOperationResponse'
                "400":
                    description: Invalid parameters, missing required criteria, or role does not exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create/update constraints.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
            -   DefaultCognitoAuthorizer: []
        delete: 
            summary: "Delete a constraint."
            description: "Delete a constraint by its ID. This operation cannot be undone."
            responses:
                "200":
                    description: Constraint deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/constraintOperationResponse'
                "400":
                    description: Invalid constraint ID.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete constraints.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Constraint not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "constraintId"
                in: "path"
                description: "Unique identifier for constraint."
                required: true
                schema:
                    $ref: '#/components/schemas/object_name_pattern_regex'
            security:
            -   DefaultCognitoAuthorizer: []
    /auth/loginProfile/{userId}/:
        get:
            summary: "Get loginProfile for the specified user"
            responses:
                "200":
                    description: OK
                "403":
                    description: Unauthorized user.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "userId"
                in: "path"
                description: "Unique identifier for user."
                required: true
                schema:
                    $ref: '#/components/schemas/userid_regex'
            security:
            -   DefaultCognitoAuthorizer: []
        post:
            summary: "Update login profile for particular user. Primary API call to trigger updating profiles from JWT or organizational logic. Body contents (optional) may get overriden internally by organizational specific profile. "
            requestBody:
                required: false
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/constraint'
            parameters:
            - $ref: '#/components/parameters/maxItemsParam'
            - $ref: '#/components/parameters/pageSizeParam'
            - $ref: '#/components/parameters/startingTokenParam'            
            - name: "userId"
              in: "path"
              description: "Unique identifier for user."
              required: true
              schema:
                $ref: '#/components/schemas/userid_regex'
            responses:
                "200":
                    description: OK
                "403":
                    description: Unauthorized user.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
            -   DefaultCognitoAuthorizer: []

    /auth/routes:
        post:
            summary: "Authorized routes."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/auth_request'
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
            -   DefaultCognitoAuthorizer: []
    /check-subscription:
        post:
            summary: "Verify if subscription exists or not."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/checkSubscription"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
    /comments/assets/{assetId}:
        get:
            summary: "List all comments for an asset."
            responses:
                "200":
                    description: OK
                "400":
                    description: No asset ID in API call.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "showDeleted"
                in: "query"
                description: "Show deleted comments flag."
                schema:
                    type: boolean
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
    /comments/assets/{assetId}/assetVersionId/{assetVersionId}/assets:
        get:
            summary: "List all comments for the given version of an asset."
            responses:
                "200":
                    description: OK
                "400":
                    description: No asset ID in API call.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Generated path parameter for assetId."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetVersionId"
                in: "path"
                description: "Asset version."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "showDeleted"
                in: "query"
                description: "Show deleted comments flag."
                schema:
                    type: boolean
            security:
              - DefaultCognitoAuthorizer: []
    /comments/assets/{assetId}/assetVersionId:commentId/{assetVersionId:commentId}/:
        get:
            summary: "Get specified comment."
            responses:
                "200":
                    description: OK
                "400":
                    description: No asset ID in API call.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Generated path parameter for assetId."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetVersionId:commentId"
                in: "path"
                description: "Unique identifier for comment. Validation will be performed on asset version ID and comment ID."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete specified comment."
            responses:
                "200":
                    description: OK
                "400":
                    description: No asset ID in API call.
                "403":
                    description: Action not allowed or not authorized.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Generated path parameter for assetId."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetVersionId:commentId" 
                in: "path"
                description: "Unique identifier for comment."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Add comment to specified version of asset."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/comment"
            responses:
                "200":
                    description: OK
                "400":
                    description: No asset ID in API call.
                "403":
                    description: Action not allowed or not authorized.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Generated path parameter for assetId."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetVersionId:commentId" 
                in: "path"
                description: "Unique identifier for comment."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Edit specified comment."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/comment"
            responses:
                "200":
                    description: Succeeded.
                "400":
                    description: No asset ID in API call.
                "403":
                    description: Action not allowed or not authorized.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "assetId"
                in: "path"
                description: "Generated path parameter for assetId."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetVersionId:commentId" 
                in: "path"
                description: "Unique identifier for comment."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    /database:
        post:
            summary: "Create or update a database."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/database"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not allowed to create/update database.
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        get:
            summary: "List all databases."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    databases:
                                        type: array
                                        items:
                                            $ref: "#/components/schemas/database"
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}:
        get:
            summary: "Get a database."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/database"
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
        put:
            summary: "Update a database."
            description: "Update an existing database's description, default bucket, or configuration options. At least one field must be provided for update."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateDatabaseRequest"
            responses:
                "200":
                    description: Database updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/updateDatabaseResponse"
                "400":
                    description: Invalid parameters or bucket ID not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update database.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    /buckets:
        get:
            summary: "List all S3 bucket configurations."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getBucketsResponse"
                "403":
                    description: Not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete a database."
            responses:
                "200":
                    description: Database deleted.
                "400":
                    description: Database contains an active workflow, pipeline, or assets. 
                "403":
                    description: Action not allowed or not authorized. 
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        parameters:
            - name: "databaseId"
              in: "path"
              description: "Unique identifier for database."
              required: true
              schema:
                  $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/assets:
        get:
            summary: "List all assets in a database."
            responses:
                "200":
                    description: OK
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        parameters:
            - name: "databaseId"
              in: "path"
              description: "Unique identifier for database, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
              required: true
              schema:
                  $ref: '#/components/schemas/id_regex'
            - name: "showDeleted"
              in: "query"
              description: "Flag to specify whether to list deleted assets or not."
              required: false
              schema:
                  type: "boolean"
    /database/{databaseId}/assets/{assetId}:
        get:
            summary: "Get an asset."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/asset"
                "404":
                    description: Database OR asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: path
                  description: "Unique identifier for database, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
                  required: true
                  schema:
                    $ref: "#/components/schemas/id_regex"
                - name: "assetId"
                  in: path
                  description: "Unique identifier for asset, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
                  required: true
                  schema:
                    $ref: "#/components/schemas/id_regex"
                - name: "showDeleted"
                  in: query
                  description: "Flag to specify whether to list deleted assets or not."
                  required: false
                  schema:
                    type: "boolean"
        put:
            summary: "Update an asset's editable fields."
            description: "Update an asset's editable fields (assetName, description, isDistributable, tags)."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/assetUpdate"
            responses:
                "200":
                    description: Asset updated successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: "Asset updated successfully"
                                    asset:
                                        $ref: "#/components/schemas/asset"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: path
                  description: "Unique identifier for database."
                  required: true
                  schema:
                    $ref: "#/components/schemas/id_regex"
                - name: "assetId"
                  in: path
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                    $ref: "#/components/schemas/id_regex"
            security:
                - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete an asset."
            responses:
                "200":
                    description: Asset deleted.
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        parameters:
            - name: "databaseId"
              in: "path"
              description: "Unique identifier for database, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
              required: true
              schema:
                $ref: '#/components/schemas/id_regex'
            - name: "assetId"
              in: "path"
              description: "Unique identifier for asset, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
              required: true
              schema:
                $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/assets/{assetId}/download:
        post:
            summary: "Generate presigned url for downloading the given or latest version of an asset"
            description: "Generate presigned url for downloading the given or latest version of an asset. Provide an optional key to specify the version of the asset."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - databaseId
                                - assetId
                            properties:
                                key:
                                    $ref: "#/components/schemas/asset_path_pattern_regex"
            responses:
                "200":
                    description: Presigned url for asset download is generated.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: url
                "400":
                    description: DatabaseId OR AssetId invalid.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "401":
                    description: Asset not distributable.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database OR Asset OR Version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        parameters:
            - name: "databaseId"
              in: "path"
              description: "Unique identifier for database, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
              required: true
              schema:
                  type: "string"
                  pattern: ^[a-zA-Z]([-_a-zA-Z0-9]){3,100}
            - name: "assetId"
              in: "path"
              description: "Unique identifier for asset, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
              required: true
              schema:
                  type: "string"
                  pattern: ^[a-zA-Z]([-_a-zA-Z0-9]){3,100}
    /database/{databaseId}/assets/{assetId}/export:
        post:
            summary: "Export comprehensive asset data including child tree, metadata, files, and relationships"
            description: "Exports a complete asset hierarchy starting from the specified root asset, including all child assets, their files, metadata, versions, and relationships. Supports pagination for large asset trees and optional response compression (100KB threshold). The export includes configurable filters for files, metadata, and relationship fetching. Uses POST method to support request body with filter options and optional presigned URL generation."
            requestBody:
                required: false
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                generatePresignedUrls:
                                    type: boolean
                                    default: false
                                    description: "Generate presigned S3 URLs for file downloads (skipped for archived files)"
                                includeFolderFiles:
                                    type: boolean
                                    default: false
                                    description: "Include folder markers in file listings"
                                includeOnlyPrimaryTypeFiles:
                                    type: boolean
                                    default: false
                                    description: "Include only files with primaryType metadata set"
                                includeFileMetadata:
                                    type: boolean
                                    default: true
                                    description: "Include file-specific metadata"
                                includeAssetLinkMetadata:
                                    type: boolean
                                    default: true
                                    description: "Include asset link relationship metadata"
                                includeAssetMetadata:
                                    type: boolean
                                    default: true
                                    description: "Include asset-level metadata"
                                fetchAssetRelationships:
                                    type: boolean
                                    default: true
                                    description: "Fetch asset relationships and linked asset details. When false, only returns the single root asset without any relationship data or child assets."
                                fetchEntireChildrenSubtrees:
                                    type: boolean
                                    default: false
                                    description: "Fetch entire children relationship sub-trees. When false, only fetches root asset plus one level of children. When true, fetches the complete tree hierarchy."
                                includeParentRelationships:
                                    type: boolean
                                    default: false
                                    description: "Include parent relationships in the relationship data. When false (default), filters out relationships where the root asset is the child (i.e., parent relationships to the root asset)."
                                includeArchivedFiles:
                                    type: boolean
                                    default: false
                                    description: "Include archived files in export. Note: Presigned URLs will not be generated for archived files regardless of generatePresignedUrls setting."
                                fileExtensions:
                                    type: array
                                    items:
                                        type: string
                                    description: "Filter files to only specified extensions (e.g., ['.pdf', '.jpg'])"
                                maxAssets:
                                    type: integer
                                    default: 100
                                    minimum: 1
                                    maximum: 1000
                                    description: "Maximum number of assets to return per page"
                                startingToken:
                                    type: string
                                    description: "Pagination token from previous response for retrieving next page"
            responses:
                "200":
                    description: Asset export data retrieved successfully. Response may be gzip compressed if size exceeds 100KB.
                    headers:
                        Content-Encoding:
                            schema:
                                type: string
                                enum: [gzip]
                            description: "Present when response is compressed"
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - assets
                                    - totalAssetsInTree
                                    - assetsInThisPage
                                properties:
                                    assets:
                                        type: array
                                        description: "Array of assets with complete data"
                                        items:
                                            type: object
                                            properties:
                                                is_root_lookup_asset:
                                                    type: boolean
                                                id:
                                                    type: string
                                                databaseid:
                                                    type: string
                                                assetid:
                                                    type: string
                                                bucketid:
                                                    type: string
                                                assetname:
                                                    type: string
                                                bucketname:
                                                    type: string
                                                bucketprefix:
                                                    type: string
                                                assettype:
                                                    type: string
                                                description:
                                                    type: string
                                                isdistributable:
                                                    type: boolean
                                                tags:
                                                    type: array
                                                    items:
                                                        type: string
                                                asset_version_id:
                                                    type: string
                                                asset_version_createdate:
                                                    type: string
                                                asset_version_comment:
                                                    type: string
                                                archived:
                                                    type: boolean
                                                metadata:
                                                    type: object
                                                    additionalProperties:
                                                        type: object
                                                        properties:
                                                            valueType:
                                                                type: string
                                                            value:
                                                                type: string
                                                files:
                                                    type: array
                                                    items:
                                                        type: object
                                    relationships:
                                        type: array
                                        description: "Array of parent-child relationships (only in first page)"
                                        items:
                                            type: object
                                            properties:
                                                parentAssetId:
                                                    type: string
                                                parentAssetDatabaseId:
                                                    type: string
                                                childAssetId:
                                                    type: string
                                                childAssetDatabaseId:
                                                    type: string
                                                assetLinkType:
                                                    type: string
                                                assetLinkId:
                                                    type: string
                                                assetLinkAliasId:
                                                    type: string
                                                metadata:
                                                    type: object
                                    NextToken:
                                        type: string
                                        description: "Pagination token for retrieving next page of assets"
                                    totalAssetsInTree:
                                        type: integer
                                        description: "Total number of assets in the complete tree"
                                    assetsInThisPage:
                                        type: integer
                                        description: "Number of assets returned in this page"
                "400":
                    description: Invalid parameters or pagination token.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to access asset or child assets.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing export request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/asset_id_regex'
            security:
                - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/download/stream/{proxy+}:
        get:
            summary: "Stream asset files with HTTP range support."
            description: "Stream asset files directly with HTTP range support for large files. Requires asset to be distributable. Supports partial content requests via Range headers for efficient streaming of large files."
            responses:
                "200":
                    description: Asset file content streamed successfully.
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
                        text/plain:
                            schema:
                                type: string
                        image/*:
                            schema:
                                type: string
                                format: binary
                        video/*:
                            schema:
                                type: string
                                format: binary
                        audio/*:
                            schema:
                                type: string
                                format: binary
                    headers:
                        Accept-Ranges:
                            description: "Indicates that the server supports range requests"
                            schema:
                                type: string
                                example: "bytes"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the content in bytes"
                            schema:
                                type: string
                        Content-Range:
                            description: "Range of bytes being returned (for partial content)"
                            schema:
                                type: string
                                example: "bytes 200-1023/2048"
                        Content-Encoding:
                            description: "Content encoding if applicable"
                            schema:
                                type: string
                "206":
                    description: Partial content returned (when Range header is used).
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
                    headers:
                        Content-Range:
                            description: "Range of bytes being returned"
                            schema:
                                type: string
                                example: "bytes 200-1023/2048"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the partial content in bytes"
                            schema:
                                type: string
                "400":
                    description: Invalid parameters, file too large for streaming, or unallowed file type.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to stream this asset or asset not distributable.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database, asset, or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "proxy+"
                  in: "path"
                  description: "File path within the asset to stream. Can include subdirectories and filename."
                  required: true
                  schema:
                    type: "string"
                - name: "Range"
                  in: "header"
                  description: "HTTP Range header for partial content requests (e.g., 'bytes=200-1023')."
                  required: false
                  schema:
                      type: string
                      pattern: ^bytes=\d+-\d*$
                      example: "bytes=200-1023"
            security:
                - DefaultCognitoAuthorizer: []
        head:
            summary: "Check asset file availability and permissions without downloading content."
            description: "Check if an asset file exists and retrieve metadata headers without downloading file content. Uses S3 head_object for efficient metadata retrieval. Returns the same headers as GET but with empty body. Does not check file size thresholds or generate redirects. Requires asset to be distributable."
            responses:
                "200":
                    description: File exists and user has permission to access it.
                    headers:
                        Accept-Ranges:
                            description: "Indicates that the server supports range requests"
                            schema:
                                type: string
                                example: "bytes"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the content in bytes"
                            schema:
                                type: string
                        Last-Modified:
                            description: "Last modification date"
                            schema:
                                type: string
                                format: date-time
                        ETag:
                            description: "Entity tag for cache validation"
                            schema:
                                type: string
                        x-amz-version-id:
                            description: "S3 version ID if versioned"
                            schema:
                                type: string
                        x-amz-storage-class:
                            description: "S3 storage class"
                            schema:
                                type: string
                        Cache-Control:
                            description: "Cache control directive"
                            schema:
                                type: string
                                example: "no-cache, no-store"
                "400":
                    description: Invalid parameters or unallowed file type.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to access this asset or asset not distributable.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database, asset, or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "proxy+"
                  in: "path"
                  description: "File path within the asset to check. Can include subdirectories and filename."
                  required: true
                  schema:
                    type: "string"
            security:
                - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/auxiliaryPreviewAssets/stream/{proxy+}:
        get:
            summary: "Stream auxiliary preview asset files with HTTP range support."
            description: "Stream auxiliary preview asset files (e.g., converted formats, thumbnails) directly with HTTP range support. These are preview files stored in the auxiliary bucket. Supports partial content requests via Range headers for efficient streaming of large files."
            responses:
                "200":
                    description: Auxiliary preview file content streamed successfully.
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
                        text/plain:
                            schema:
                                type: string
                        image/*:
                            schema:
                                type: string
                                format: binary
                        video/*:
                            schema:
                                type: string
                                format: binary
                        audio/*:
                            schema:
                                type: string
                                format: binary
                    headers:
                        Accept-Ranges:
                            description: "Indicates that the server supports range requests"
                            schema:
                                type: string
                                example: "bytes"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the content in bytes"
                            schema:
                                type: string
                        Content-Range:
                            description: "Range of bytes being returned (for partial content)"
                            schema:
                                type: string
                                example: "bytes 200-1023/2048"
                        Content-Encoding:
                            description: "Content encoding if applicable"
                            schema:
                                type: string
                "206":
                    description: Partial content returned (when Range header is used).
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
                    headers:
                        Content-Range:
                            description: "Range of bytes being returned"
                            schema:
                                type: string
                                example: "bytes 200-1023/2048"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the partial content in bytes"
                            schema:
                                type: string
                "400":
                    description: Invalid parameters, file too large for streaming, or unallowed file type.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to stream this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database, asset, or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "proxy+"
                  in: "path"
                  description: "File path within the auxiliary preview bucket to stream. Can include subdirectories and filename."
                  required: true
                  schema:
                    type: "string"
                - name: "Range"
                  in: "header"
                  description: "HTTP Range header for partial content requests (e.g., 'bytes=200-1023')."
                  required: false
                  schema:
                      type: string
                      pattern: ^bytes=\d+-\d*$
                      example: "bytes=200-1023"
            security:
                - DefaultCognitoAuthorizer: []
        head:
            summary: "Check auxiliary preview file availability and permissions without downloading content."
            description: "Check if an auxiliary preview file exists and retrieve metadata headers without downloading file content. Uses S3 head_object for efficient metadata retrieval. Returns the same headers as GET but with empty body. Does not check file size thresholds or generate redirects."
            responses:
                "200":
                    description: File exists and user has permission to access it.
                    headers:
                        Accept-Ranges:
                            description: "Indicates that the server supports range requests"
                            schema:
                                type: string
                                example: "bytes"
                        Content-Type:
                            description: "MIME type of the file"
                            schema:
                                type: string
                        Content-Length:
                            description: "Size of the content in bytes"
                            schema:
                                type: string
                        Last-Modified:
                            description: "Last modification date"
                            schema:
                                type: string
                                format: date-time
                        ETag:
                            description: "Entity tag for cache validation"
                            schema:
                                type: string
                        x-amz-version-id:
                            description: "S3 version ID if versioned"
                            schema:
                                type: string
                        x-amz-storage-class:
                            description: "S3 storage class"
                            schema:
                                type: string
                        Cache-Control:
                            description: "Cache control directive"
                            schema:
                                type: string
                                example: "no-cache, no-store"
                "400":
                    description: Invalid parameters or unallowed file type.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to access this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database, asset, or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "proxy+"
                  in: "path"
                  description: "File path within the auxiliary preview bucket to check. Can include subdirectories and filename."
                  required: true
                  schema:
                    type: "string"
            security:
                - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/listFiles:
        get:
            summary: "List files in an asset."
            description: "List files in an asset with optional pagination and filtering. Supports two modes: basic mode (fast, minimal data) and full mode (detailed data with version info, preview files, and metadata). Use basic mode for quick file listings and full mode when you need complete file information."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/listAssetFilesResponse"
                "403":
                    description: Database OR Asset OR Version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database OR Asset OR Version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: maxItems
                in: query
                description: "Maximum number of items to return. Default is 200 for full mode, 1500 for basic mode. Maximum allowed is 1500."
                required: false
                schema:
                    type: integer
                    minimum: 1
                    maximum: 1500
              - name: pageSize
                in: query
                description: "Number of items per page. Default is 200 for full mode, 1500 for basic mode. Maximum allowed is 1500."
                required: false
                schema:
                    type: integer
                    minimum: 1
                    maximum: 1500
              - $ref: "#/components/parameters/startingTokenParam"
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: includeArchived
                in: query
                description: Whether to include archived files
                required: false
                schema:
                    type: boolean
                    default: false
              - name: prefix
                in: query
                description: Filter files by prefix
                required: false
                schema:
                    type: string
              - name: basic
                in: query
                description: "Enable basic mode for fast file listing. When true, skips expensive operations (head_object calls, preview file lookups, version mismatch checks) and returns only data available from S3 list operation. Fields like versionId, primaryType, and previewFile will be null/empty in basic mode. Use basic mode for quick listings and full mode (basic=false) when you need complete file details."
                required: false
                schema:
                    type: boolean
                    default: false
    /database/{databaseId}/assets/{assetId}/fileInfo:
        get:
            summary: "Get detailed information about a specific file."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileInfoResponse"
                "403":
                    description: Not authorized to access this file.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: filePath
                in: query
                description: Path to the file relative to the asset root
                required: true
                schema:
                    type: string
              - name: includeVersions
                in: query
                description: Whether to include version history
                required: false
                schema:
                    type: boolean
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/moveFile:
        post:
            summary: "Move or rename a file within an asset."
            description: "Move a file to a different path or rename it in place. Handles both moving files to different directories and renaming files within the same directory. Source file must not be archived, and destination must not exist (including archived versions). Preview files and auxiliary files are automatically moved/renamed with the base file."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/moveFileRequest"
            responses:
                "200":
                    description: File moved/renamed successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileOperationResponse"
                "400":
                    description: Invalid parameters, file already exists at destination, or source file is archived.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to move/rename files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Source file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []

    /database/{databaseId}/assets/{assetId}/copyFile:
        post:
            summary: "Copy a file within an asset or to another asset."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/copyFileRequest"
            responses:
                "200":
                    description: File copied successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileOperationResponse"
                "400":
                    description: Invalid parameters or file already exists at destination.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to copy files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Source file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/archiveFile:
        delete:
            summary: "Archive a file (soft delete)."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/archiveFileRequest"
            responses:
                "200":
                    description: File archived successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileOperationResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to archive files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File not found or already archived.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/unarchiveFile:
        post:
            summary: "Unarchive a previously archived file."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/unarchiveFileRequest"
            responses:
                "200":
                    description: File unarchived successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileOperationResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to unarchive files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File not found or not archived.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/deleteFile:
        delete:
            summary: "Permanently delete a file or files under a prefix."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteFileRequest"
            responses:
                "200":
                    description: File(s) deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/fileOperationResponse"
                "400":
                    description: Invalid parameters or confirmation required.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
              
    /database/{databaseId}/assets/{assetId}/deleteAssetPreview:
        delete:
            summary: "Delete the asset preview file."
            description: "Deletes the asset preview file from the S3 bucket and clears the previewLocation from the asset record in DynamoDB."
            responses:
                "200":
                    description: Asset preview deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/deleteAssetPreviewResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete asset preview.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset preview not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
              
    /database/{databaseId}/assets/{assetId}/deleteAuxiliaryPreviewAssetFiles:
        delete:
            summary: "Delete auxiliary preview asset files."
            description: "Deletes auxiliary preview asset files for a specific file path (treated as a prefix). This endpoint is used to clean up temporary auxiliary files that may be created during preview generation."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteAuxiliaryPreviewAssetFilesRequest"
            responses:
                "200":
                    description: Auxiliary preview files deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/deleteAuxiliaryPreviewAssetFilesResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete auxiliary preview files.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: No auxiliary files found under the specified prefix.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/revertFileVersion/{versionId}:
        post:
            summary: "Revert a file to a previous version."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/revertFileVersionRequest"
            responses:
                "200":
                    description: File reverted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/revertFileVersionResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to revert files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File or version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: versionId
                in: path
                description: Version ID to revert to
                required: true
                schema:
                    type: string
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/setPrimaryFile:
        put:
            summary: "Set or remove primary type metadata for a file."
            description: "Set or remove primary type metadata for a file in S3. The primary type can be used to categorize files within an asset (e.g., primary, lod1-lod5, other). Only works on files, not folders."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/setPrimaryFileRequest"
            responses:
                "200":
                    description: Primary type set successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/setPrimaryFileResponse"
                "400":
                    description: Invalid parameters or trying to set primary type on folder.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to modify files in this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: File not found or file is archived.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/createVersion:
        post:
            summary: "Create a new asset version."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createAssetVersionRequest"
            responses:
                "200":
                    description: Asset version created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/assetVersionOperationResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create versions for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/revertAssetVersion/{assetVersionId}:
        post:
            summary: "Revert an asset to a previous version."
            requestBody:
                required: false
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/revertAssetVersionRequest"
            responses:
                "200":
                    description: Asset reverted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/assetVersionOperationResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to revert this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetVersionId
                in: path
                description: Asset version ID to revert to
                required: true
                schema:
                    type: string
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/getVersions:
        get:
            summary: "Get all versions for an asset."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/assetVersionsListResponse"
                "403":
                    description: Not authorized to view versions for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/getVersion/{assetVersionId}:
        get:
            summary: "Get details for a specific asset version."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/assetVersionResponse"
                "403":
                    description: Not authorized to view this version.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetVersionId
                in: path
                description: Asset version ID
                required: true
                schema:
                    type: string
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/archiveAsset:
        delete:
            summary: "Archive an asset (soft delete)."
            responses:
                "200":
                    description: Asset archived successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: "Asset archived successfully"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to archive this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/deleteAsset:
        delete:
            summary: "Permanently delete an asset."
            responses:
                "200":
                    description: Asset deleted successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: "Asset deleted successfully"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    
    /database/{databaseId}/assets/{assetId}/unarchiveAsset:
        put:
            summary: "Unarchive an asset (restore from soft delete)."
            description: "Restore a previously archived asset by removing S3 delete markers and moving the asset record back to the active database partition. The databaseId can be provided with or without the #deleted suffix, which will be normalized automatically."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                confirmUnarchive:
                                    type: boolean
                                    description: "Confirmation flag for unarchiving (must be true)"
                                    default: false
                                reason:
                                    type: string
                                    maxLength: 256
                                    description: "Optional reason for unarchiving the asset"
                            required:
                                - confirmUnarchive
                            example:
                                confirmUnarchive: true
                                reason: "Restoring asset for active use"
            responses:
                "200":
                    description: Asset unarchived successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    success:
                                        type: boolean
                                        example: true
                                    message:
                                        type: string
                                        example: "Asset {assetId} unarchived successfully"
                                    assetId:
                                        type: string
                                        example: "my-asset-id"
                                    operation:
                                        type: string
                                        example: "unarchive"
                                    timestamp:
                                        type: string
                                        format: date-time
                                        example: "2024-01-15T10:30:00.000Z"
                                required:
                                    - success
                                    - message
                                    - assetId
                                    - operation
                                    - timestamp
                "400":
                    description: Invalid parameters, asset not archived, or confirmation not provided.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to unarchive this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: "Database ID (may include #deleted suffix which will be normalized)"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: "Asset ID to unarchive"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/revert:
        post:
            summary: "Revert an asset to a previous version."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                version:
                                    type: integer
            responses:
                "200":
                    description: Asset reverted.
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Database OR Asset OR Version not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        parameters:
          - name: "databaseId"
            in: "path"
            description: "Unique identifier for database, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
            required: true
            schema:
                $ref: '#/components/schemas/id_regex'
          - name: "assetId"
            in: "path"
            description: "Unique identifier for asset, must be all lower case, no special chars or spaces except - and _ only letters for first character min 3 and max 100."
            required: true
            schema:
                $ref: '#/components/schemas/id_regex'
                
    /database/{databaseId}/assets/{assetId}/createFolder:
        post:
            summary: "Create a folder in S3 for the specified asset"
            description: "Creates a folder (zero-byte object with trailing slash) in S3 for the specified asset. The key path must be a folder prefix (ends with a slash) and must contain the base assetlocation key as the start of the path."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - keyPath
                            properties:
                                keyPath:
                                    type: string
                                    description: "The key path for the folder to create. Must end with a slash and start with the asset's base key."
            responses:
                "200":
                    description: Folder created successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: "Folder created successfully"
                                    keyPath:
                                        type: string
                                        example: "asset-id/folder/subfolder/"
                "400":
                    description: Invalid parameters or key path.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create folders for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "databaseId"
                  in: "path"
                  description: "Unique identifier for database."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
                - name: "assetId"
                  in: "path"
                  description: "Unique identifier for asset."
                  required: true
                  schema:
                      $ref: '#/components/schemas/id_regex'
            security:
                - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/workflows/{workflowId}:
        post:
            summary: "Execute a workflow using an asset as the input source."
            requestBody:
                required: false
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                fileKey:
                                    $ref: "#/components/schemas/asset_path_pattern_regex"
                                    description: "Optional file key to specify which file to use for workflow execution"
            responses:
                "200":
                    description: Workflow execution started.
                "403":
                    description: Not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset does not exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: workflowId
                in: path
                description: Workflow ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/assets/{assetId}/workflows/{workflowId}/executions:
        get:
            summary: "List all executions for a workflow."
            responses:
                "200":
                    description: OK.
                "404":
                    description: Database OR Asset OR Workflow not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: assetId
                in: path
                description: Asset ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: workflowId
                in: path
                description: Workflow ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/pipelines/{pipelineId}:
        get:
            summary: "Get a pipeline."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/pipeline'
                "404":
                    description: Database OR Pipeline not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: pipelineId
                in: path
                description: Pipeline ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
        delete:
            summary: "Delete a pipeline."
            responses:
                "200":
                    description: Pipeline deleted.
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Database OR Pipeline not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: pipelineId
                in: path
                description: Pipeline ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "value"
                in: "query"
                description: "Pipeline ID."
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/workflows:
        get:
            summary: "List all workflows for a database."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                  workflows:
                                    type: array
                                    items:
                                        $ref: "#/components/schemas/workflow"
                "403":
                    description: Not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /database/{databaseId}/workflows/{workflowId}:
        get:
            summary: "Get a workflow."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/workflow"
                "404":
                    description: Database OR Workflow not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: workflowId
                in: path
                description: Workflow ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
        delete:
            summary: "Delete a workflow."
            responses:
                "200":
                    description: Workflow deleted.
                "404":
                    description: Database OR Workflow not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: workflowId
                in: path
                description: Workflow ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /ingest-asset:
        post:
            summary: "Ingest a new asset into the database."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/ingest_asset"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
    /metadata/{databaseId}/{assetId}/:
        get:
            summary: "Get metadata for a given asset."
            responses:
                "200":
                    description: OK
                "404":
                    description: Missing asset or database ID path parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Database Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetId"
                in: "path"
                description: "Asset Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetPath"
                in: "query"
                description: "Asset Path"
                required: false
                schema:
                    $ref: '#/components/schemas/asset_path_pattern_regex'
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
        post:
            summary: "Update metadata for a given asset."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/metadata"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Missing asset or database ID path parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Database Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetId"
                in: "path"
                description: "Asset Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
                - DefaultCognitoAuthorizer: []
        put:
            summary: "Update metadata for a given asset."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/metadata"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Missing asset or database ID path parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Database Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "assetId"
                in: "path"
                description: "Asset Id"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
                - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/metadata:
        get:
            summary: "Get metadata for an asset."
            description: "Retrieve all metadata associated with a specific asset with pagination support."
            responses:
                "200":
                    description: Metadata retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getAssetMetadataResponse"
                "400":
                    description: Invalid parameters or pagination token.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view metadata for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create metadata for an asset (bulk operation)."
            description: "Add new metadata items to a specific asset. Supports bulk creation of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createAssetMetadataRequest"
            responses:
                "200":
                    description: Metadata creation completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create metadata for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update metadata for an asset (bulk operation)."
            description: "Update existing metadata items for a specific asset. Supports two update modes: UPDATE (default, upserts provided metadata) and REPLACE_ALL (replaces all metadata with provided items, requires PUT+POST+DELETE permissions). Returns partial success information if some items fail. REPLACE_ALL mode includes automatic rollback on failure."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateAssetMetadataRequest"
            responses:
                "200":
                    description: Metadata update completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update metadata for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete metadata for an asset (bulk operation)."
            description: "Remove metadata items from an asset. Supports bulk deletion of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteAssetMetadataRequest"
            responses:
                "200":
                    description: Metadata deletion completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete metadata for this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}/assets/{assetId}/metadata/file:
        get:
            summary: "Get metadata or attributes for a file."
            description: "Retrieve all metadata or attributes associated with a specific file with pagination support. Supports both 'metadata' and 'attribute' types."
            responses:
                "200":
                    description: File metadata/attributes retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getFileMetadataResponse"
                "400":
                    description: Invalid parameters, pagination token, or file path is a folder.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view metadata for this file.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "filePath"
                in: "query"
                description: "Relative file path (must not end with / for folders)."
                required: true
                schema:
                    type: string
              - name: "type"
                in: "query"
                description: "Type of data to retrieve: 'metadata' or 'attribute'."
                required: true
                schema:
                    type: string
                    enum: [metadata, attribute]
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create metadata or attributes for a file (bulk operation)."
            description: "Add new metadata or attribute items to a specific file. Supports bulk creation. File attributes only support 'string' metadataValueType. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createFileMetadataRequest"
            responses:
                "200":
                    description: File metadata/attributes creation completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters, validation error, or file path is a folder.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create metadata for this file.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update metadata or attributes for a file (bulk operation)."
            description: "Update existing metadata or attribute items for a specific file. Supports two update modes: UPDATE (default, upserts provided metadata) and REPLACE_ALL (replaces all metadata with provided items, requires PUT+POST+DELETE permissions). File attributes only support 'string' metadataValueType. Returns partial success information if some items fail. REPLACE_ALL mode includes automatic rollback on failure."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateFileMetadataRequest"
            responses:
                "200":
                    description: File metadata/attributes update completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters, validation error, or file path is a folder.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update metadata for this file.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete metadata or attributes for a file (bulk operation)."
            description: "Remove metadata or attribute items from a file. Supports bulk deletion of multiple items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteFileMetadataRequest"
            responses:
                "200":
                    description: File metadata/attributes deletion completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters, validation error, or file path is a folder.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete metadata for this file.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset or file not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - name: "assetId"
                in: "path"
                description: "Unique identifier for asset."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}/metadata:
        get:
            summary: "Get metadata for a database."
            description: "Retrieve all metadata associated with a specific database with pagination support."
            responses:
                "200":
                    description: Metadata retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getDatabaseMetadataResponse"
                "400":
                    description: Invalid parameters or pagination token.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view metadata for this database.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create metadata for a database (bulk operation)."
            description: "Add new metadata items to a specific database. Supports bulk creation of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createDatabaseMetadataRequest"
            responses:
                "200":
                    description: Metadata creation completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create metadata for this database.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update metadata for a database (bulk operation)."
            description: "Update existing metadata items for a specific database. Supports two update modes: UPDATE (default, upserts provided metadata) and REPLACE_ALL (replaces all metadata with provided items, requires PUT+POST+DELETE permissions). Returns partial success information if some items fail. REPLACE_ALL mode includes automatic rollback on failure."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateDatabaseMetadataRequest"
            responses:
                "200":
                    description: Metadata update completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update metadata for this database.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete metadata for a database (bulk operation)."
            description: "Remove metadata items from a database. Supports bulk deletion of multiple metadata items in a single request. Returns partial success information if some items fail."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteDatabaseMetadataRequest"
            responses:
                "200":
                    description: Metadata deletion completed (may include partial failures).
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/bulkMetadataOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete metadata for this database.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Unique identifier for database."
                required: true
                schema:
                    $ref: "#/components/schemas/id_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /database/{databaseId}/metadataSchema/{metadataSchemaId}:
        get:
            summary: "Get a specific metadata schema."
            description: "Retrieve details of a specific metadata schema by its ID. Returns the complete schema definition including field definitions, entity type, and configuration."
            responses:
                "200":
                    description: Metadata schema retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/metadataSchemaResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to view this metadata schema.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Metadata schema not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Database ID"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "metadataSchemaId"
                in: "path"
                description: "Metadata schema ID"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
                - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete a metadata schema."
            description: "Delete a metadata schema by its ID. Requires confirmation in the request body."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteMetadataSchemaRequest"
            responses:
                "200":
                    description: Metadata schema deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/metadataSchemaOperationResponse"
                "400":
                    description: Invalid parameters or confirmation not provided.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete this metadata schema.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Metadata schema not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "path"
                description: "Database ID"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "metadataSchemaId"
                in: "path"
                description: "Metadata schema ID"
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
            security:
                - DefaultCognitoAuthorizer: []
    /metadataschema:
        get:
            summary: "List metadata schemas with optional filters."
            description: "Retrieve a paginated list of metadata schemas. Supports filtering by database ID and/or entity type. Returns schemas the user is authorized to view."
            responses:
                "200":
                    description: Metadata schemas retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/getMetadataSchemasResponse"
                "400":
                    description: Invalid parameters or pagination token.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list metadata schemas.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: "databaseId"
                in: "query"
                description: "Filter by database ID (optional)"
                required: false
                schema:
                    $ref: '#/components/schemas/id_regex'
              - name: "metadataEntityType"
                in: "query"
                description: "Filter by entity type (optional)"
                required: false
                schema:
                    type: string
                    enum: [databaseMetadata, assetMetadata, fileMetadata, fileAttribute, assetLinkMetadata]
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
            security:
                - DefaultCognitoAuthorizer: []
        post:
            summary: "Create a new metadata schema."
            description: "Create a new metadata schema template for a specific entity type. Supports GLOBAL database ID for system-wide schemas. Validates field definitions and enforces constraints based on entity type."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createMetadataSchemaRequest"
            responses:
                "200":
                    description: Metadata schema created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/metadataSchemaOperationResponse"
                "400":
                    description: Invalid parameters, validation error, or database does not exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create metadata schemas.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
        put:
            summary: "Update an existing metadata schema."
            description: "Update an existing metadata schema's name, fields, file restrictions, or enabled status. At least one field must be provided for update."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateMetadataSchemaRequest"
            responses:
                "200":
                    description: Metadata schema updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/metadataSchemaOperationResponse"
                "400":
                    description: Invalid parameters or validation error.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update this metadata schema.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Metadata schema not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
    /pipelines:
        put:
            summary: "Create or update a pipeline."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/pipeline"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        get:
            summary: "List all pipelines."
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
    /database/{databaseId}/pipelines:
        get:
            summary: "List all pipelines in a database."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    pipelines:
                                        type: array
                                        items:
                                            $ref: "#/components/schemas/pipeline"
                "404":
                    description: Database not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
              - name: databaseId
                in: path
                description: Database ID.
                required: true
                schema:
                    $ref: '#/components/schemas/id_regex'
    /roles:
        get:
            summary: "List all roles."
            description: "Retrieve a paginated list of all roles. Only returns roles the user is authorized to view."
            responses:
                "200":
                    description: Roles retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/getRolesResponse'
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create a new role."
            description: "Create a new role with the specified name, description, and optional source information. Role names must be unique."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createRoleRequest"
            responses:
                "200":
                    description: Role created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/roleOperationResponse"
                "400":
                    description: Invalid parameters or role already exists.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
        put:
            summary: "Update an existing role."
            description: "Update a role's description, source, sourceIdentifier, and mfaRequired fields. The role name cannot be changed."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateRoleRequest"
            responses:
                "200":
                    description: Role updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/roleOperationResponse"
                "400":
                    description: Invalid parameters or role not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /roles/{roleId}:
        delete:
            summary: "Delete a role."
            description: "Delete a role by its name. This operation cannot be undone."
            responses:
                "200":
                    description: Role deleted successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: string
                                        example: "success"
                "400":
                    description: Invalid role name or role does not exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: roleId
                in: path
                description: "Role name to delete."
                required: true
                schema:
                    $ref: "#/components/schemas/object_name_pattern_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /subscriptions: 
        get:
            summary: "List all tags."
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        delete:
            summary: "Delete specified subscription."
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create subscriptions."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/subscription"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
        put: 
            summary: "Update subscriptions."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/subscription"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /tags:
        get:
            summary: "List all tags."
            description: "Retrieve a paginated list of all tags. Tags are returned with their associated tag type, and required tags are marked with [R] suffix."
            responses:
                "200":
                    description: Tags retrieved successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: object
                                        properties:
                                            Items:
                                                type: array
                                                items:
                                                    $ref: "#/components/schemas/tagResponse"
                                            NextToken:
                                                type: string
                                                description: "Pagination token for retrieving next page"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list tags.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create a new tag."
            description: "Create a new tag with the specified name, description, and tag type. Tag names must be unique across all tag types."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createTagRequest"
            responses:
                "200":
                    description: Tag created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagOperationResponse"
                "400":
                    description: Invalid parameters or tag already exists.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create tags.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update an existing tag."
            description: "Update a tag's description and/or tag type. The tag name cannot be changed."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateTagRequest"
            responses:
                "200":
                    description: Tag updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagOperationResponse"
                "400":
                    description: Invalid parameters or tag not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update tags.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /tags/{tagId}:
        delete:
            summary: "Delete a tag."
            description: "Delete a tag by its name. This operation cannot be undone."
            responses:
                "200":
                    description: Tag deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagOperationResponse"
                "400":
                    description: Invalid tag name.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete tags.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Tag not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: tagId
                in: path
                description: "Tag name to delete."
                required: true
                schema:
                    $ref: "#/components/schemas/object_name_pattern_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /tag-types:
        get:
            summary: "List all tag types."
            description: "Retrieve a paginated list of all tag types with their associated tags. Tag types marked as required will have the required field set to 'True'."
            responses:
                "200":
                    description: Tag types retrieved successfully.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    message:
                                        type: object
                                        properties:
                                            Items:
                                                type: array
                                                items:
                                                    $ref: "#/components/schemas/tagTypeResponse"
                                            NextToken:
                                                type: string
                                                description: "Pagination token for retrieving next page"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list tag types.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post:
            summary: "Create a new tag type."
            description: "Create a new tag type with the specified name, description, and required flag. Tag type names must be unique."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createTagTypeRequest"
            responses:
                "200":
                    description: Tag type created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagTypeOperationResponse"
                "400":
                    description: Invalid parameters or tag type already exists.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create tag types.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []            
        put:
            summary: "Update an existing tag type."
            description: "Update a tag type's description and/or required flag. The tag type name cannot be changed."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateTagTypeRequest"
            responses:
                "200":
                    description: Tag type updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagTypeOperationResponse"
                "400":
                    description: Invalid parameters or tag type not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update tag types.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Tag type not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /tag-types/{tagTypeId}:
        delete:
            summary: "Delete a tag type."
            description: "Delete a tag type by its name. This operation cannot be undone. Tag types that are currently in use by tags cannot be deleted."
            responses:
                "200":
                    description: Tag type deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/tagTypeOperationResponse"
                "400":
                    description: Invalid tag type name or tag type is in use by tags.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete tag types.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Tag type not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: tagTypeId
                in: path
                description: "Tag type name to delete."
                required: true
                schema:
                    $ref: "#/components/schemas/object_name_pattern_regex"
            security:
              - DefaultCognitoAuthorizer: []
    /unsubscribe:
        delete:
            summary: "Unsubscribe."
            description: "eventName (object regex), entityName (object regex), entityId (ID regex), and the list of subscribers (email array regex) are required fields"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /user-roles:
        get:
            summary: "List all user roles."
            description: "Retrieve a paginated list of all user-role assignments grouped by user. Returns users with their assigned roles. Only returns user roles the requesting user is authorized to view based on Casbin policies."
            responses:
                "200":
                    description: User roles retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/getUserRolesResponse'
                "400":
                    description: Invalid pagination parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to list user roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters: 
              - $ref: "#/components/parameters/maxItemsParam"
              - $ref: "#/components/parameters/pageSizeParam"
              - $ref: "#/components/parameters/startingTokenParam"
            security:
              - DefaultCognitoAuthorizer: []
        post: 
            summary: "Create new user roles."
            description: "Assign one or more roles to a user. All specified roles must exist in the system. Validates that roles don't already exist for the user before creating. Requires POST permission on userRole objects via Casbin."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createUserRolesRequest"
            responses:
                "200":
                    description: User roles created successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/userRoleOperationResponse"
                "400":
                    description: Invalid parameters, role doesn't exist, or role already assigned to user.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to create user roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
        put:
            summary: "Update user roles."
            description: "Update a user's role assignments by specifying the complete new set of roles. Performs a differential update - adds new roles and removes roles not in the list. All specified roles must exist in the system. Requires POST permission for new roles and DELETE permission for removed roles via Casbin."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/updateUserRolesRequest"
            responses:
                "200":
                    description: User roles updated successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/userRoleOperationResponse"
                "400":
                    description: Invalid parameters or role doesn't exist.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to update user roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
        delete: 
            summary: "Delete all roles for a user."
            description: "Remove all role assignments for a specified user. Requires DELETE permission on userRole objects via Casbin for each role being removed."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/deleteUserRolesRequest"
            responses:
                "200":
                    description: User roles deleted successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/userRoleOperationResponse"
                "400":
                    description: Invalid userId parameter.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to delete user roles.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
              - DefaultCognitoAuthorizer: []
    /visualizerAssets/{proxy+}/:
        get:
            summary: "Get a visualizer asset."
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Action not allowed or not authorized.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - name: proxy+
                in: path
                description: Visualizer asset path.
                required: true
                schema:
                    $ref: '#/components/schemas/asset_path_pattern_regex'
    /uploads:
        post:
            summary: "Initialize a multipart upload for asset files or preview."
            description: "Initialize a multipart upload for asset files or preview. Returns an uploadId and presigned URLs for uploading file parts."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/initializeUploadRequest"
            responses:
                "200":
                    description: Upload initialized successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/initializeUploadResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to upload to this asset.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Asset not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "429":
                    description: Rate limit exceeded. Maximum 5 upload initializations per user per minute.
                    headers:
                        Retry-After:
                            description: "Number of seconds to wait before retrying"
                            schema:
                                type: integer
                                example: 60
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
    
    /uploads/{uploadId}/complete:
        post:
            summary: "Complete a multipart upload."
            description: "Complete a multipart upload by providing the ETags for all uploaded parts. Files are validated and moved from temporary to final location."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/completeUploadRequest"
            responses:
                "200":
                    description: Upload completed successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/completeUploadResponse"
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to complete this upload.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Upload not found.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
                - name: "uploadId"
                  in: path
                  description: "Unique identifier for the upload."
                  required: true
                  schema:
                    type: string
            security:
                - DefaultCognitoAuthorizer: []
    
    /workflows:
        put:
            summary: "Create or update a workflow."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/workflow"
            responses:
                "200":
                    description: OK
                "400":
                    description: Invalid parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to read pipeline.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
        get:
            summary: "List all workflows."
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/workflow"
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            parameters:
              - $ref: '#/components/parameters/maxItemsParam'
              - $ref: '#/components/parameters/pageSizeParam'
              - $ref: '#/components/parameters/startingTokenParam'
    /search:
        get:
            summary: "Get OpenSearch index mappings."
            description: "Retrieve the field mappings for both asset and file indexes to understand available search fields."
            responses:
                "200":
                    description: Index mappings retrieved successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/searchMappingsResponse"
                "403":
                    description: Not authorized to access search.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Search service not available.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
        post:
            summary: "Execute advanced search across assets and files."
            description: "Execute complex search queries across asset and file indexes with advanced filtering, metadata search, aggregations, and result explanations."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/searchRequest"
            responses:
                "200":
                    description: Search executed successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/searchResponse"
                "400":
                    description: Invalid search parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to access search.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Search service not available.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
    /search/simple:
        post:
            summary: "Execute simple search across assets and files."
            description: "Execute simplified search queries with basic parameters for easy API integration. Searches across both asset and file indexes with automatic query construction."
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/simpleSearchRequest"
            responses:
                "200":
                    description: Simple search executed successfully.
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/searchResponse"
                "400":
                    description: Invalid search parameters.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "403":
                    description: Not authorized to access search.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "404":
                    description: Search service not available.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
                "500":
                    description: Error processing request.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/error'
            security:
                - DefaultCognitoAuthorizer: []
components:
    schemas:
        asset:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    #example: blade-12345
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    #example: vr-models-training
                description:
                    #example: "Description of uploaded asset."
                    $ref: "#/components/schemas/string256Param"
                assetName:
                    # example: 
                    $ref: '#/components/schemas/object_name_pattern_regex'
                assetPathKey:
                    # example
                    $ref: '#/components/schemas/asset_path_pattern_regex'
                previewLocation:
                    # example
                    $ref: '#/components/schemas/asset_path_pattern_regex'
            required:
                - assetId
                - databaseId
                - description
                - assetName
                - assetPathKey
        asset_links:
            type: object
            properties:
                assetIdFrom:
                    $ref: '#/components/schemas/id_regex'
                assetIdTo:
                    $ref: '#/components/schemas/id_regex'
                relationshipType:
                    $ref: "#/components/schemas/string256Param"
            required:
                - assetIdFrom
                - assetIdTo
                - relationshipType
        asset_path_pattern_regex:
            type: string
            pattern: ^[a-z]([-_a-z0-9]){3,63}(\/[a-zA-Z0-9_\-.]+){1,63}$
        auth_request:
            type: object
            required:
                - routes
            properties:
              routes:
                type: array
                items:
                    $ref: "#/components/schemas/route"
        auth_routes:
            type: object
            properties:
              routes:
                type: array
                items:
                    $ref: "#/components/schemas/route"
        checkSubscription:
            type: object
            properties:
                userId:
                    $ref: "#/components/schemas/email_pattern_regex"
                assetId:
                    $ref: '#/components/schemas/id_regex'
            required:
                - userId
                - assetId
        comment:
            type: object
            properties:
                commentBody:
                    type: string
            required:
                - assetId
                - commentId
                - commentBody
        # Constraint API Request/Response Schemas
        constraintCriteria:
            type: object
            properties:
                field:
                    type: string
                    minLength: 1
                    maxLength: 256
                    description: "Field name to evaluate in the constraint"
                operator:
                    type: string
                    enum: [equals, contains, does_not_contain, starts_with, ends_with, is_one_of, is_not_one_of]
                    description: "Comparison operator for the criteria"
                value:
                    oneOf:
                        - type: string
                        - type: array
                          items:
                              type: string
                    description: "Value or array of values to compare against. Must be a valid regex pattern."
            required:
                - field
                - operator
                - value
        
        groupPermission:
            type: object
            properties:
                groupId:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Role/group name (must exist in roles table)"
                permission:
                    type: string
                    enum: [GET, PUT, POST, DELETE]
                    description: "Permission type"
                permissionType:
                    type: string
                    enum: [allow, deny]
                    description: "Whether to allow or deny the permission"
            required:
                - groupId
                - permission
                - permissionType
        
        userPermission:
            type: object
            properties:
                userId:
                    $ref: "#/components/schemas/userid_regex"
                    description: "User ID (email format)"
                permission:
                    type: string
                    enum: [GET, PUT, POST, DELETE]
                    description: "Permission type"
                permissionType:
                    type: string
                    enum: [allow, deny]
                    description: "Whether to allow or deny the permission"
            required:
                - userId
                - permission
                - permissionType
        
        createConstraintRequest:
            type: object
            properties:
                identifier:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Unique constraint identifier (1-256 characters)"
                name:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Constraint name (1-256 characters)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Constraint description (1-256 characters)"
                objectType:
                    type: string
                    enum: [database, asset, api, web, tag, tagType, role, userRole, pipeline, workflow, metadataSchema]
                    description: "Type of object this constraint applies to"
                criteriaAnd:
                    type: array
                    items:
                        $ref: "#/components/schemas/constraintCriteria"
                    description: "Array of criteria that must ALL be true (AND logic)"
                    default: []
                criteriaOr:
                    type: array
                    items:
                        $ref: "#/components/schemas/constraintCriteria"
                    description: "Array of criteria where at least ONE must be true (OR logic)"
                    default: []
                groupPermissions:
                    type: array
                    items:
                        $ref: "#/components/schemas/groupPermission"
                    description: "Permissions for groups/roles"
                    default: []
                userPermissions:
                    type: array
                    items:
                        $ref: "#/components/schemas/userPermission"
                    description: "Permissions for specific users"
                    default: []
            required:
                - identifier
                - name
                - description
                - objectType
            example:
                identifier: "asset-viewer-constraint"
                name: "Asset Viewer Constraint"
                description: "Allow viewers to access distributable assets"
                objectType: "asset"
                criteriaAnd:
                    - field: "isDistributable"
                      operator: "equals"
                      value: "true"
                criteriaOr: []
                groupPermissions:
                    - groupId: "viewer"
                      permission: "GET"
                      permissionType: "allow"
                userPermissions: []
        
        constraintResponse:
            type: object
            properties:
                constraintId:
                    type: string
                    description: "Constraint ID"
                name:
                    type: string
                    description: "Constraint name"
                description:
                    type: string
                    description: "Constraint description"
                objectType:
                    type: string
                    enum: [database, asset, api, web, tag, tagType, role, userRole, pipeline, workflow, metadataSchema]
                    description: "Type of object this constraint applies to"
                criteriaAnd:
                    type: array
                    items:
                        $ref: "#/components/schemas/constraintCriteria"
                    description: "Array of AND criteria"
                    default: []
                criteriaOr:
                    type: array
                    items:
                        $ref: "#/components/schemas/constraintCriteria"
                    description: "Array of OR criteria"
                    default: []
                groupPermissions:
                    type: array
                    items:
                        $ref: "#/components/schemas/groupPermission"
                    description: "Group permissions"
                    default: []
                userPermissions:
                    type: array
                    items:
                        $ref: "#/components/schemas/userPermission"
                    description: "User permissions"
                    default: []
            required:
                - constraintId
                - name
                - description
                - objectType
        
        getConstraintResponse:
            type: object
            properties:
                constraint:
                    $ref: "#/components/schemas/constraintResponse"
                    description: "Constraint details"
            required:
                - constraint
        
        getConstraintsResponse:
            type: object
            properties:
                message:
                    type: object
                    properties:
                        Items:
                            type: array
                            items:
                                $ref: "#/components/schemas/constraintResponse"
                            description: "List of constraints"
                        NextToken:
                            type: string
                            description: "Pagination token for retrieving next page"
                    required:
                        - Items
            required:
                - message
            example:
                message:
                    Items:
                        - constraintId: "asset-viewer-constraint"
                          name: "Asset Viewer Constraint"
                          description: "Allow viewers to access distributable assets"
                          objectType: "asset"
                          criteriaAnd:
                              - field: "isDistributable"
                                operator: "equals"
                                value: "true"
                          criteriaOr: []
                          groupPermissions:
                              - groupId: "viewer"
                                permission: "GET"
                                permissionType: "allow"
                          userPermissions: []
        
        constraintOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                constraintId:
                    type: string
                    description: "Constraint ID that was operated on"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
                constraint:
                    type: string
                    description: "JSON string of the constraint data (for create/update operations)"
            required:
                - success
                - message
                - constraintId
                - operation
                - timestamp
            example:
                success: true
                message: "Constraint asset-viewer-constraint created/updated successfully"
                constraintId: "asset-viewer-constraint"
                operation: "create"
                timestamp: "2024-01-15T10:30:00.000Z"
                constraint: "{\"identifier\":\"asset-viewer-constraint\",\"name\":\"Asset Viewer Constraint\",...}"
        database:
            type: object
            properties:
                databaseId:
                    #example: vr-models-training
                    $ref: '#/components/schemas/id_regex'
                description:
                    #example: 3d models used in training programs.
                    $ref: "#/components/schemas/string256Param"
                defaultBucketId:
                    #example: 550e8400-e29b-41d4-a716-446655440000
                    $ref: '#/components/schemas/uuid_regex'
                restrictMetadataOutsideSchemas:
                    type: boolean
                    default: false
                    description: "Whether to restrict metadata to only fields defined in schemas"
                restrictFileUploadsToExtensions:
                    type: string
                    default: ""
                    description: "Comma-delimited list of allowed file extensions (e.g., 'jpg,png,pdf'). Empty string allows all extensions."
            required:
                - databaseId
                - description
                - defaultBucketId
        
        updateDatabaseRequest:
            type: object
            properties:
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated database description (optional)"
                defaultBucketId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Updated default bucket ID (optional)"
                restrictMetadataOutsideSchemas:
                    type: boolean
                    description: "Whether to restrict metadata to only fields defined in schemas (optional)"
                restrictFileUploadsToExtensions:
                    type: string
                    description: "Comma-delimited list of allowed file extensions (optional)"
            required: []
            example:
                description: "Updated 3d models used in training programs"
                restrictMetadataOutsideSchemas: true
                restrictFileUploadsToExtensions: "obj,fbx,gltf,glb"
        
        updateDatabaseResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID that was updated"
                operation:
                    type: string
                    enum: [update]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - databaseId
                - operation
                - timestamp
            example:
                success: true
                message: "Database vr-models-training updated successfully"
                databaseId: "vr-models-training"
                operation: "update"
                timestamp: "2024-01-15T10:30:00.000Z"
        email_pattern_regex: 
            type: string
            pattern: ^[\w\-\.\+]+@([\w-]+\.)+[\w-]{2,4}$
        entityId:
            $ref: '#/components/schemas/id_regex'
        entityName:
            $ref: "#/components/schemas/object_name_pattern_regex"
        error:
            type: object
            properties:
                message:
                    type: string
            required:
                - message
        eventName:
            $ref: "#/components/schemas/object_name_pattern_regex"
        filename_pattern:
            type: string
            pattern: ^[a-zA-Z0-9_\-.]+
        file_type_regex: 
                type: string
                pattern: ^[\\.]([a-z0-9]){1,7}
        id_regex:
            type: string
            pattern: ^[a-z]([-_a-z0-9]){3,63}$
        asset_id_regex:
            type: string
            pattern: ^(?!.*[<>:"\/\\|?*])(?!.*[.\s]$)[\w\s.,\'-]{1,254}[^.\s]$
        ingest_asset: 
            type: object
            properties:
                assetName:
                    $ref: '#/components/schemas/object_name_pattern_regex'
                key:
                    type: string
            required:
                - assetName
        location:
            type: object
            properties:
                Key:
                    type: string
                    #example: blade-12345.stl
                Bucket:
                    type: string
                    #example: training-models-vams-assets
            required:
                - Key
                - Bucket
        metadata:
            type: object
            properties:
                assetPath:
                    $ref: '#/components/schemas/asset_path_pattern_regex'
        
        # Metadata Schema V2 API Schemas
        metadataSchemaEntityType:
            type: string
            enum: [databaseMetadata, assetMetadata, fileMetadata, fileAttribute, assetLinkMetadata]
            description: "Entity type for metadata schema"
        
        metadataSchemaFieldDefinition:
            type: object
            properties:
                metadataFieldKeyName:
                    type: string
                    minLength: 1
                    maxLength: 256
                    description: "Field key name (1-256 characters)"
                metadataFieldValueType:
                    $ref: "#/components/schemas/metadataValueType"
                    description: "Type of metadata value for this field"
                required:
                    type: boolean
                    default: false
                    description: "Whether this field is required"
                dependsOnFieldKeyName:
                    type: array
                    items:
                        type: string
                    description: "Field keys this field depends on (optional)"
                controlledListKeys:
                    type: array
                    items:
                        type: string
                    description: "Allowed values for INLINE_CONTROLLED_LIST type (required for that type)"
                defaultMetadataFieldValue:
                    type: string
                    description: "Default value for this field (optional, must match metadataFieldValueType)"
            required:
                - metadataFieldKeyName
                - metadataFieldValueType
            example:
                metadataFieldKeyName: "project_status"
                metadataFieldValueType: "inline_controlled_list"
                required: true
                controlledListKeys: ["planning", "in_progress", "completed", "archived"]
                defaultMetadataFieldValue: "planning"
        
        metadataSchemaFields:
            type: object
            properties:
                fields:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/metadataSchemaFieldDefinition"
                    description: "Array of field definitions (at least one required)"
            required:
                - fields
            example:
                fields:
                    - metadataFieldKeyName: "project_name"
                      metadataFieldValueType: "string"
                      required: true
                    - metadataFieldKeyName: "project_status"
                      metadataFieldValueType: "inline_controlled_list"
                      required: true
                      controlledListKeys: ["planning", "in_progress", "completed"]
                      defaultMetadataFieldValue: "planning"
        
        createMetadataSchemaRequest:
            type: object
            properties:
                databaseId:
                    type: string
                    minLength: 1
                    maxLength: 256
                    description: "Database ID (supports 'GLOBAL' for system-wide schemas)"
                metadataSchemaEntityType:
                    $ref: "#/components/schemas/metadataSchemaEntityType"
                    description: "Entity type this schema applies to"
                schemaName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Schema name (1-256 characters)"
                fileKeyTypeRestriction:
                    type: string
                    description: "Comma-delimited file extensions (e.g., 'jpg,png,pdf'). Only for fileMetadata/fileAttribute types."
                fields:
                    $ref: "#/components/schemas/metadataSchemaFields"
                    description: "Field definitions for the schema"
                enabled:
                    type: boolean
                    default: true
                    description: "Whether schema is enabled"
            required:
                - databaseId
                - metadataSchemaEntityType
                - schemaName
                - fields
            example:
                databaseId: "engineering-db"
                metadataSchemaEntityType: "assetMetadata"
                schemaName: "Engineering Asset Schema"
                fields:
                    fields:
                        - metadataFieldKeyName: "project_name"
                          metadataFieldValueType: "string"
                          required: true
                        - metadataFieldKeyName: "completion_date"
                          metadataFieldValueType: "date"
                          required: false
                enabled: true
        
        updateMetadataSchemaRequest:
            type: object
            properties:
                metadataSchemaId:
                    $ref: "#/components/schemas/id_regex"
                    description: "Metadata schema ID to update"
                schemaName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Updated schema name (optional)"
                fileKeyTypeRestriction:
                    type: string
                    description: "Updated file extension restrictions (optional)"
                fields:
                    $ref: "#/components/schemas/metadataSchemaFields"
                    description: "Updated field definitions (optional)"
                enabled:
                    type: boolean
                    description: "Updated enabled status (optional)"
            required:
                - metadataSchemaId
            example:
                metadataSchemaId: "550e8400-e29b-41d4-a716-446655440000"
                schemaName: "Updated Engineering Asset Schema"
                enabled: true
        
        deleteMetadataSchemaRequest:
            type: object
            properties:
                confirmDelete:
                    type: boolean
                    default: false
                    description: "Confirmation for deletion (must be true)"
            required:
                - confirmDelete
            example:
                confirmDelete: true
        
        metadataSchemaResponse:
            type: object
            properties:
                metadataSchemaId:
                    $ref: "#/components/schemas/id_regex"
                    description: "Metadata schema ID"
                databaseId:
                    type: string
                    description: "Database ID"
                metadataSchemaEntityType:
                    $ref: "#/components/schemas/metadataSchemaEntityType"
                    description: "Entity type"
                schemaName:
                    type: string
                    description: "Schema name"
                fileKeyTypeRestriction:
                    type: string
                    description: "File extension restrictions (if applicable)"
                fields:
                    $ref: "#/components/schemas/metadataSchemaFields"
                    description: "Field definitions"
                enabled:
                    type: boolean
                    description: "Whether schema is enabled"
                dateCreated:
                    type: string
                    format: date-time
                    description: "Creation timestamp"
                dateModified:
                    type: string
                    format: date-time
                    description: "Last modification timestamp"
                createdBy:
                    type: string
                    description: "Creator user ID"
                modifiedBy:
                    type: string
                    description: "Last modifier user ID"
            required:
                - metadataSchemaId
                - databaseId
                - metadataSchemaEntityType
                - schemaName
                - fields
                - enabled
        
        metadataSchemaOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                metadataSchemaId:
                    $ref: "#/components/schemas/id_regex"
                    description: "Metadata schema ID"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - metadataSchemaId
                - operation
                - timestamp
            example:
                success: true
                message: "Metadata schema 'Engineering Asset Schema' created successfully"
                metadataSchemaId: "550e8400-e29b-41d4-a716-446655440000"
                operation: "create"
                timestamp: "2024-01-15T10:30:00.000Z"
        
        getMetadataSchemasResponse:
            type: object
            properties:
                Items:
                    type: array
                    items:
                        $ref: "#/components/schemas/metadataSchemaResponse"
                    description: "List of metadata schemas"
                    default: []
                NextToken:
                    type: string
                    description: "Pagination token for retrieving next page"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - Items
        
        object_name_pattern_regex:
            type: string
            pattern: ^[a-zA-Z0-9\-._ ]{1,256}$
        pipeline:
            type: object
            properties:
                databaseId:
                    #example: vr-models-training
                    $ref: "#/components/schemas/id_regex"
                pipelineId:
                    #example: convert-to-gltf
                    $ref: "#/components/schemas/id_regex"
                description:
                    type: string
                    #example: Converts models to GLTF.
                assetType:
                    #example: model
                    $ref: "#/components/schemas/file_type_regex"
                outputType:
                    #example: gltf
                    $ref: "#/components/schemas/file_type_regex"
            required:
                - pipelineId
                - databaseId
                - description
                - assetType
                - outputType
        role:
            type: object
            properties:
                roleName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                description:
                    $ref: "#/components/schemas/string256Param"                    
            required:
                - roleName
                - description
        
        # Role API Request/Response Schemas
        createRoleRequest:
            type: object
            properties:
                roleName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Unique role name (1-256 characters)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Role description (1-256 characters)"
                source:
                    $ref: "#/components/schemas/string256Param"
                    description: "Optional source identifier (must be 'INTERNAL_SYSTEM' if provided)"
                sourceIdentifier:
                    $ref: "#/components/schemas/string256Param"
                    description: "Optional source identifier value"
                mfaRequired:
                    type: boolean
                    description: "Whether MFA is required for this role"
                    default: false
            required:
                - roleName
                - description
        
        updateRoleRequest:
            type: object
            properties:
                roleName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Role name to update (cannot be changed)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated role description"
                source:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated source identifier (must be 'INTERNAL_SYSTEM' if provided)"
                sourceIdentifier:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated source identifier value"
                mfaRequired:
                    type: boolean
                    description: "Updated MFA requirement flag"
                    default: false
            required:
                - roleName
                - description
        
        roleResponse:
            type: object
            properties:
                id:
                    type: string
                    description: "Unique role ID (UUID)"
                roleName:
                    type: string
                    description: "Role name"
                description:
                    type: string
                    description: "Role description"
                createdOn:
                    type: string
                    format: date-time
                    description: "Date when role was created"
                source:
                    type: string
                    description: "Source identifier"
                sourceIdentifier:
                    type: string
                    description: "Source identifier value"
                mfaRequired:
                    type: boolean
                    description: "Whether MFA is required for this role"
                    default: false
            required:
                - roleName
                - description
        
        getRolesResponse:
            type: object
            properties:
                message:
                    type: object
                    properties:
                        Items:
                            type: array
                            items:
                                $ref: "#/components/schemas/roleResponse"
                            description: "List of roles"
                        NextToken:
                            type: string
                            description: "Pagination token for retrieving next page"
                    required:
                        - Items
            required:
                - message
        
        roleOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                roleName:
                    type: string
                    description: "Role name that was operated on"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - roleName
                - operation
                - timestamp
        route:
            type: object
            properties:
                routeId:
                    $ref: '#/components/schemas/id_regex'
                description:
                    $ref: "#/components/schemas/string256Param"
            required:
                - routeId
                - description
        s3_access:
            type: object
            properties:
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                assetId:
                    $ref: '#/components/schemas/id_regex'
        sagemaker_notebook_name_regex:
            type: string
            pattern: ^[a-zA-Z0-9](-*[a-zA-Z0-9])*
        string256Param:
            type: string
            maxLength: 256
        subscribers:
            type: array
            items:
                $ref: "#/components/schemas/email_pattern_regex"
        subscription:
            type: object
            properties:
                entityId: 
                    $ref: "#/components/schemas/entityId"
                entityName:
                    $ref: "#/components/schemas/entityName"
                eventName:
                    $ref: "#/components/schemas/eventName"
                subscribers:
                    $ref: "#/components/schemas/subscribers"
            required:
                - entityId
                - entityName
                - eventName
                - subscribers
        tag:
            type: object
            properties: 
                tagName:
                    #example:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                description:
                    $ref: "#/components/schemas/string256Param"
                tagTypeName:
                    #example:
                    $ref: "#/components/schemas/object_name_pattern_regex"
            required:
                - tagName
                - description
                - tagTypeName
        
        # Tag API Request/Response Schemas
        createTagRequest:
            type: object
            properties:
                tagName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Unique tag name (1-256 characters)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Tag description (1-256 characters)"
                tagTypeName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Tag type name that this tag belongs to"
            required:
                - tagName
                - description
                - tagTypeName
        
        updateTagRequest:
            type: object
            properties:
                tagName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Tag name to update (cannot be changed)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated tag description"
                tagTypeName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Updated tag type name"
            required:
                - tagName
                - description
                - tagTypeName
        
        tagResponse:
            type: object
            properties:
                tagName:
                    type: string
                    description: "Tag name"
                description:
                    type: string
                    description: "Tag description"
                tagTypeName:
                    type: string
                    description: "Tag type name (may include [R] suffix for required tags)"
                required:
                    type: string
                    enum: ["True", "False"]
                    description: "Whether this tag is required (inherited from tag type)"
                    default: "False"
            required:
                - tagName
                - description
                - tagTypeName
        
        tagOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                tagName:
                    type: string
                    description: "Tag name that was operated on"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - tagName
                - operation
                - timestamp
        tagType:
            type: object
            properties: 
                tagTypeName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                description:
                    $ref: "#/components/schemas/string256Param"
            required: 
                - tagTypeName
                - description
        
        # Tag Type API Request/Response Schemas
        createTagTypeRequest:
            type: object
            properties:
                tagTypeName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Unique tag type name (1-256 characters)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Tag type description (1-256 characters)"
                required:
                    type: string
                    enum: ["True", "False"]
                    description: "Whether tags of this type are required"
                    default: "False"
            required:
                - tagTypeName
                - description
        
        updateTagTypeRequest:
            type: object
            properties:
                tagTypeName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Tag type name to update (cannot be changed)"
                description:
                    $ref: "#/components/schemas/string256Param"
                    description: "Updated tag type description"
                required:
                    type: string
                    enum: ["True", "False"]
                    description: "Updated required flag"
                    default: "False"
            required:
                - tagTypeName
                - description
        
        tagTypeResponse:
            type: object
            properties:
                tagTypeName:
                    type: string
                    description: "Tag type name"
                description:
                    type: string
                    description: "Tag type description"
                required:
                    type: string
                    enum: ["True", "False"]
                    description: "Whether tags of this type are required"
                    default: "False"
                tags:
                    type: array
                    items:
                        type: string
                    description: "List of tag names associated with this tag type"
                    default: []
            required:
                - tagTypeName
                - description
                - required
        
        tagTypeOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                tagTypeName:
                    type: string
                    description: "Tag type name that was operated on"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - tagTypeName
                - operation
                - timestamp
        userid_regex:
            type: string
            pattern: ^[\w\-\.\+\@]{3,256}$
        userRole:
            type: object
            properties: 
                roleName:
                    $ref: "#/components/schemas/object_name_pattern_regex"
                description:
                    $ref: "#/components/schemas/string256Param"
            required:
                - roleName
                - description
        
        # User Role API Request/Response Schemas
        createUserRolesRequest:
            type: object
            properties:
                userId:
                    $ref: "#/components/schemas/userid_regex"
                    description: "User ID (email format, 3-256 characters)"
                roleName:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Array of role names to assign to the user (at least one required)"
            required:
                - userId
                - roleName
            example:
                userId: "user@example.com"
                roleName: ["admin", "editor"]
        
        updateUserRolesRequest:
            type: object
            properties:
                userId:
                    $ref: "#/components/schemas/userid_regex"
                    description: "User ID (email format, 3-256 characters)"
                roleName:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/object_name_pattern_regex"
                    description: "Complete new set of role names for the user (at least one required). Performs differential update."
            required:
                - userId
                - roleName
            example:
                userId: "user@example.com"
                roleName: ["admin", "viewer"]
        
        deleteUserRolesRequest:
            type: object
            properties:
                userId:
                    $ref: "#/components/schemas/userid_regex"
                    description: "User ID (email format, 3-256 characters) whose roles should be deleted"
            required:
                - userId
            example:
                userId: "user@example.com"
        
        userRoleResponse:
            type: object
            properties:
                userId:
                    type: string
                    description: "User ID (email)"
                roleName:
                    type: array
                    items:
                        type: string
                    description: "Array of role names assigned to the user"
                createdOn:
                    type: string
                    format: date-time
                    description: "Date when the first role was created for this user"
            required:
                - userId
                - roleName
            example:
                userId: "user@example.com"
                roleName: ["admin", "editor"]
                createdOn: "2024-01-15T10:30:00.000Z"
        
        getUserRolesResponse:
            type: object
            properties:
                message:
                    type: object
                    properties:
                        Items:
                            type: array
                            items:
                                $ref: "#/components/schemas/userRoleResponse"
                            description: "List of user role assignments grouped by user"
                        NextToken:
                            type: string
                            description: "Pagination token for retrieving next page"
                    required:
                        - Items
            required:
                - message
            example:
                message:
                    Items:
                        - userId: "user1@example.com"
                          roleName: ["admin", "editor"]
                          createdOn: "2024-01-15T10:30:00.000Z"
                        - userId: "user2@example.com"
                          roleName: ["viewer"]
                          createdOn: "2024-01-16T14:20:00.000Z"
                    NextToken: "2024-01-16T14:20:00.000Z"
        
        userRoleOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                userId:
                    type: string
                    description: "User ID that was operated on"
                operation:
                    type: string
                    enum: [create, update, delete]
                    description: "Operation that was performed"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
            required:
                - success
                - message
                - userId
                - operation
                - timestamp
            example:
                success: true
                message: "User roles created successfully"
                userId: "user@example.com"
                operation: "create"
                timestamp: "2024-01-15T10:30:00.000Z"
        
        uuid_regex:
            type: string
            pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
        validatePagInfoParams:
            type: object
            properties:
              maxItemsParam:
                $ref: "#/components/parameters/maxItemsParam"
              pageSizeParam:
                $ref: "#/components/parameters/pageSizeParam"
              startingTokenParam:
                $ref: "#/components/parameters/startingTokenParam"
        version:
            type: object
            properties:
                Comment:
                    type: string
                Version:
                    type: string
                S3Version:
                    type: string
                DateModified:
                    type: string
                description:
                    type: string
                specifiedPipelines:
                    type: array
                    items:
                        type: string
        assetUpdate:
            type: object
            properties:
                assetName:
                    $ref: '#/components/schemas/object_name_pattern_regex'
                description:
                    $ref: "#/components/schemas/string256Param"
                isDistributable:
                    type: boolean
                tags:
                    type: array
                    items:
                        $ref: "#/components/schemas/object_name_pattern_regex"
        
        initializeUploadRequest:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                uploadType:
                    type: string
                    enum: [assetFile, assetPreview]
                files:
                    type: array
                    maxItems: 1000
                    items:
                        $ref: "#/components/schemas/uploadFile"
                    description: "Array of files to upload. Maximum 1000 files per request. Total parts across all files cannot exceed 5000."
            required:
                - assetId
                - databaseId
                - uploadType
                - files
        
        uploadFile:
            type: object
            properties:
                relativeKey:
                    $ref: '#/components/schemas/filename_pattern'
                file_size:
                    type: integer
                    minimum: 0
                    description: "File size in bytes. Use 0 for zero-byte files."
                num_parts:
                    type: integer
                    minimum: 0
                    maximum: 10000
                    description: "Number of parts for multipart upload. Use 0 for zero-byte files. Maximum 10,000 parts per file."
            required:
                - relativeKey
            description: "Either file_size or num_parts must be provided. For zero-byte files, use file_size=0 and num_parts=0."
        
        uploadPart:
            type: object
            properties:
                PartNumber:
                    type: integer
                    minimum: 1
                UploadUrl:
                    type: string
                    format: uri
            required:
                - PartNumber
                - UploadUrl
        
        uploadFileResponse:
            type: object
            properties:
                relativeKey:
                    $ref: '#/components/schemas/filename_pattern'
                uploadIdS3:
                    type: string
                    description: "Upload ID for S3 multipart upload, or 'zero-byte' for zero-byte files"
                numParts:
                    type: integer
                    minimum: 0
                    description: "Number of parts for upload. 0 for zero-byte files."
                partUploadUrls:
                    type: array
                    items:
                        $ref: "#/components/schemas/uploadPart"
                    description: "Presigned URLs for uploading parts. Empty array for zero-byte files."
            required:
                - relativeKey
                - uploadIdS3
                - numParts
                - partUploadUrls
        
        initializeUploadResponse:
            type: object
            properties:
                uploadId:
                    type: string
                files:
                    type: array
                    items:
                        $ref: "#/components/schemas/uploadFileResponse"
                message:
                    type: string
            required:
                - uploadId
                - files
                - message
        
        uploadPartCompletion:
            type: object
            properties:
                PartNumber:
                    type: integer
                    minimum: 1
                ETag:
                    type: string
            required:
                - PartNumber
                - ETag
        
        uploadFileCompletion:
            type: object
            properties:
                key:
                    $ref: '#/components/schemas/filename_pattern'
                uploadIdS3:
                    type: string
                parts:
                    type: array
                    items:
                        $ref: "#/components/schemas/uploadPartCompletion"
            required:
                - key
                - uploadIdS3
                - parts
        
        completeUploadRequest:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                uploadType:
                    type: string
                    enum: [assetFile, assetPreview]
                files:
                    type: array
                    items:
                        $ref: "#/components/schemas/uploadFileCompletion"
            required:
                - assetId
                - databaseId
                - uploadType
                - files
        
        fileCompletionResult:
            type: object
            properties:
                key:
                    $ref: '#/components/schemas/filename_pattern'
                uploadIdS3:
                    type: string
                success:
                    type: boolean
                error:
                    type: string
                largeFileAsynchronousHandling:
                    type: boolean
                    description: "Indicates if this file is being processed asynchronously due to large file size"
                    default: false
            required:
                - key
                - uploadIdS3
                - success
        
        completeUploadResponse:
            type: object
            properties:
                message:
                    type: string
                uploadId:
                    type: string
                assetId:
                    $ref: '#/components/schemas/id_regex'
                assetType:
                    type: string
                version:
                    type: string
                fileResults:
                    type: array
                    items:
                        $ref: "#/components/schemas/fileCompletionResult"
                overallSuccess:
                    type: boolean
                largeFileAsynchronousHandling:
                    type: boolean
                    description: "Indicates if any file in this upload is being processed asynchronously due to large file size"
                    default: false
            required:
                - message
                - uploadId
                - assetId
                - fileResults
                - overallSuccess
        
        # Asset File Operations Schemas
        assetFileItem:
            type: object
            properties:
                fileName:
                    type: string
                    description: "Name of the file"
                key:
                    type: string
                    description: "Full S3 key of the file"
                relativePath:
                    type: string
                    description: "Path relative to the asset root"
                isFolder:
                    type: boolean
                    description: "Whether this item is a folder"
                size:
                    type: integer
                    description: "Size of the file in bytes"
                dateCreatedCurrentVersion:
                    type: string
                    format: date-time
                    description: "Date when the current version was created"
                storageClass:
                    type: string
                    description: "S3 storage class"
                versionId:
                    type: string
                    description: "S3 version ID"
                isArchived:
                    type: boolean
                    description: "Whether the file is archived (soft deleted)"
                currentAssetVersionFileVersionMismatch:
                    type: boolean
                    description: "Whether this file's version doesn't match the current asset version"
                primaryType:
                    type: string
                    description: "Primary type metadata for the file (e.g., primary, lod1-lod5, other). Only present for non-folder objects."
                    nullable: true
                previewFile:
                    type: string
                    description: "Path to the preview file for this file, if any. Empty string if no preview file exists."
            required:
                - fileName
                - key
                - relativePath
                - isFolder
        
        listAssetFilesRequest:
            type: object
            properties:
                maxItems:
                    type: integer
                    description: "Maximum number of items to return"
                    default: 1000
                pageSize:
                    type: integer
                    description: "Number of items per page"
                    default: 100
                startingToken:
                    type: string
                    description: "Token for pagination"
                prefix:
                    type: string
                    description: "Filter files by prefix"
                includeArchived:
                    type: boolean
                    description: "Whether to include archived files"
                    default: false
        
        listAssetFilesResponse:
            type: object
            properties:
                items:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetFileItem"
                NextToken:
                    type: string
                    description: "Token for pagination"
            required:
                - items
        
        fileInfoRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Path to the file relative to the asset root"
                includeVersions:
                    type: boolean
                    description: "Whether to include version history"
                    default: false
            required:
                - filePath
        
        fileInfoResponse:
            type: object
            properties:
                fileName:
                    type: string
                    description: "Name of the file"
                key:
                    type: string
                    description: "Full S3 key of the file"
                relativePath:
                    type: string
                    description: "Path relative to the asset root"
                isFolder:
                    type: boolean
                    description: "Whether this item is a folder"
                size:
                    type: integer
                    description: "Size of the file in bytes"
                contentType:
                    type: string
                    description: "MIME type of the file"
                lastModified:
                    type: string
                    format: date-time
                    description: "Last modified date"
                etag:
                    type: string
                    description: "ETag of the file"
                storageClass:
                    type: string
                    description: "S3 storage class"
                isArchived:
                    type: boolean
                    description: "Whether the file is archived (soft deleted)"
                primaryType:
                    type: string
                    description: "Primary type metadata for the file (e.g., primary, lod1-lod5, other). Only present for non-folder objects."
                    nullable: true
                previewFile:
                    type: string
                    description: "Path to the preview file for this file, if any. Empty string if no preview file exists."
                versions:
                    type: array
                    items:
                        type: object
                        properties:
                            versionId:
                                type: string
                                description: "S3 version ID"
                            lastModified:
                                type: string
                                format: date-time
                                description: "Last modified date of this version"
                            size:
                                type: integer
                                description: "Size of this version in bytes"
                            isLatest:
                                type: boolean
                                description: "Whether this is the latest version"
                            storageClass:
                                type: string
                                description: "S3 storage class of this version"
                            etag:
                                type: string
                                description: "ETag of this version"
                            isArchived:
                                type: boolean
                                description: "Whether this version is archived"
                            currentAssetVersionFileVersionMismatch:
                                type: boolean
                                description: "Whether this version doesn't match the current asset version"
            required:
                - fileName
                - key
                - relativePath
                - isFolder
        
        moveFileRequest:
            type: object
            properties:
                sourcePath:
                    type: string
                    description: "Source file path relative to the asset root"
                destinationPath:
                    type: string
                    description: "Destination file path relative to the asset root"
            required:
                - sourcePath
                - destinationPath
        
        copyFileRequest:
            type: object
            properties:
                sourcePath:
                    type: string
                    description: "Source file path relative to the asset root"
                destinationPath:
                    type: string
                    description: "Destination file path relative to the asset root"
                destinationAssetId:
                    type: string
                    description: "Optional destination asset ID if copying to another asset"
            required:
                - sourcePath
                - destinationPath
        
        archiveFileRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "File path relative to the asset root"
                isPrefix:
                    type: boolean
                    description: "Whether to archive all files under this prefix"
                    default: false
            required:
                - filePath
        
        unarchiveFileRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "File path relative to the asset root"
            required:
                - filePath
        
        deleteFileRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "File path relative to the asset root"
                isPrefix:
                    type: boolean
                    description: "Whether to delete all files under this prefix"
                    default: false
                confirmPermanentDelete:
                    type: boolean
                    description: "Safety confirmation for permanent deletion"
                    default: false
            required:
                - filePath
                - confirmPermanentDelete
        
        fileOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                affectedFiles:
                    type: array
                    items:
                        type: string
                    description: "List of files affected by the operation"
            required:
                - success
                - message
        
        revertFileVersionRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "File path relative to the asset root"
            required:
                - filePath
        
        revertFileVersionResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                filePath:
                    type: string
                    description: "File path that was reverted"
                revertedFromVersionId:
                    type: string
                    description: "Version ID that was reverted from"
                newVersionId:
                    type: string
                    description: "New version ID created by the revert operation"
            required:
                - success
                - message
                - filePath
                - revertedFromVersionId
        
        # Asset Version Operations Schemas
        assetVersionFileModel:
            type: object
            properties:
                relativeKey:
                    type: string
                    description: "Path relative to the asset root"
                versionId:
                    type: string
                    description: "S3 version ID"
                isPermanentlyDeleted:
                    type: boolean
                    description: "Whether this file version was permanently deleted"
                isLatestVersionArchived:
                    type: boolean
                    description: "Whether the latest version of this file is archived"
                size:
                    type: integer
                    description: "Size of the file in bytes"
                lastModified:
                    type: string
                    format: date-time
                    description: "Last modified date"
                etag:
                    type: string
                    description: "ETag of the file"
            required:
                - relativeKey
                - versionId
        
        assetVersionResponse:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                assetVersionId:
                    type: string
                    description: "Asset version ID"
                dateCreated:
                    type: string
                    format: date-time
                    description: "Date when this version was created"
                comment:
                    type: string
                    description: "Comment for this version"
                files:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetVersionFileModel"
                createdBy:
                    type: string
                    description: "User who created this version"
            required:
                - assetId
                - assetVersionId
                - files
        
        assetVersionListItemModel:
            type: object
            properties:
                Version:
                    type: string
                    description: "Asset version ID"
                DateModified:
                    type: string
                    format: date-time
                    description: "Date when this version was created"
                Comment:
                    type: string
                    description: "Comment for this version"
                description:
                    type: string
                    description: "Description of this version"
                specifiedPipelines:
                    type: array
                    items:
                        type: string
                    description: "Pipelines specified for this version"
                createdBy:
                    type: string
                    description: "User who created this version"
                isCurrent:
                    type: boolean
                    description: "Whether this is the current version"
                fileCount:
                    type: integer
                    description: "Number of files in this version"
            required:
                - Version
                - DateModified
        
        assetVersionsListResponse:
            type: object
            properties:
                versions:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetVersionListItemModel"
                NextToken:
                    type: string
                    description: "Token for pagination"
            required:
                - versions
        
        assetVersionOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                assetId:
                    $ref: '#/components/schemas/id_regex'
                assetVersionId:
                    type: string
                    description: "Asset version ID"
                operation:
                    type: string
                    description: "Operation performed (create, revert)"
                timestamp:
                    type: string
                    format: date-time
                    description: "Timestamp of the operation"
                skippedFiles:
                    type: array
                    items:
                        type: string
                    description: "List of files that were skipped during the operation"
            required:
                - success
                - message
                - assetId
                - assetVersionId
                - operation
                - timestamp
        
        createAssetVersionRequest:
            type: object
            properties:
                useLatestFiles:
                    type: boolean
                    description: "Whether to use the latest files for this version"
                    default: true
                files:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetFileVersionItemModel"
                    description: "Specific files to include in this version"
                comment:
                    type: string
                    description: "Comment for this version"
            required:
                - useLatestFiles
        
        assetFileVersionItemModel:
            type: object
            properties:
                relativeKey:
                    type: string
                    description: "Path relative to the asset root"
                versionId:
                    type: string
                    description: "S3 version ID"
                isArchived:
                    type: boolean
                    description: "Whether this file is archived"
            required:
                - relativeKey
                - versionId
        
        revertAssetVersionRequest:
            type: object
            properties:
                comment:
                    type: string
                    description: "Comment for the new version created by the revert operation"
            required: []
        
        getAssetVersionRequest:
            type: object
            properties:
                assetVersionId:
                    type: string
                    description: "Asset version ID to get details for"
            required:
                - assetVersionId
        
        getAssetVersionsRequestModel:
            type: object
            properties:
                maxItems:
                    type: integer
                    description: "Maximum number of items to return"
                    default: 100
                pageSize:
                    type: integer
                    description: "Number of items per page"
                    default: 100
                startingToken:
                    type: string
                    description: "Token for pagination"
        
        workflow:
            type: object
            properties:
                databaseId:
                    #example: vr-models-training
                    $ref: '#/components/schemas/id_regex'
                pipelineId:
                    #example: ["convert-to-gltf", "reduce-polygons"]
                    type: array
                    items: 
                        $ref: '#/components/schemas/id_regex'
                workflowId:
                    #example: to-gltf-and-reduce
                    $ref: '#/components/schemas/id_regex'
                description:
                    #example: Converts models to GLTF format then reduces polygons.
                    $ref: '#/components/schemas/string256Param'
            required:
                - databaseId
                - pipelineId
                - workflowId
                - description
        bucket:
            type: object
            properties:
                bucketId:
                    $ref: '#/components/schemas/id_regex'
                bucketName:
                    type: string
                    description: "Name of the S3 bucket used for asset storage"
                baseAssetsPrefix:
                    type: string
                    description: "Base prefix path within the bucket for assets"
            required:
                - bucketId
                - bucketName
                - baseAssetsPrefix
        getBucketsResponse:
            type: object
            properties:
                Items:
                    type: array
                    items:
                        $ref: "#/components/schemas/bucket"
                NextToken:
                    type: string
                    description: "Token for pagination"
            required:
                - Items
        
        # New Asset Links API Schemas
        createAssetLinkRequest:
            type: object
            properties:
                fromAssetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Source asset ID"
                fromAssetDatabaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Source asset database ID"
                toAssetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Target asset ID"
                toAssetDatabaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Target asset database ID"
                relationshipType:
                    type: string
                    enum: [related, parentChild]
                    description: "Type of relationship between assets"
                assetLinkAliasId:
                    type: string
                    maxLength: 128
                    description: "Optional alias ID to allow multiple parent-child relationships between the same assets. Only applicable for parentChild relationship type. Each alias must be unique for the given child asset."
                tags:
                    type: array
                    items:
                        type: string
                    description: "Tags associated with the asset link"
                    default: []
            required:
                - fromAssetId
                - fromAssetDatabaseId
                - toAssetId
                - toAssetDatabaseId
                - relationshipType
        
        createAssetLinkResponse:
            type: object
            properties:
                assetLinkId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Generated asset link ID"
                message:
                    type: string
                    description: "Success message"
            required:
                - assetLinkId
                - message
        
        assetLinkModel:
            type: object
            properties:
                assetLinkId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Asset link ID"
                fromAssetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Source asset ID"
                fromAssetDatabaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Source asset database ID"
                toAssetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Target asset ID"
                toAssetDatabaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Target asset database ID"
                relationshipType:
                    type: string
                    enum: [related, parentChild]
                    description: "Type of relationship between assets"
                assetLinkAliasId:
                    type: string
                    maxLength: 128
                    description: "Optional alias ID for multiple parent-child relationships between the same assets. Only applicable for parentChild relationship type."
                tags:
                    type: array
                    items:
                        type: string
                    description: "Tags associated with the asset link"
            required:
                - assetLinkId
                - fromAssetId
                - fromAssetDatabaseId
                - toAssetId
                - toAssetDatabaseId
                - relationshipType
                - tags
        
        getSingleAssetLinkResponse:
            type: object
            properties:
                assetLink:
                    $ref: "#/components/schemas/assetLinkModel"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - assetLink
        
        updateAssetLinkRequest:
            type: object
            properties:
                tags:
                    type: array
                    items:
                        type: string
                    description: "Updated tags for the asset link"
                    default: []
            required: []
        
        updateAssetLinkResponse:
            type: object
            properties:
                message:
                    type: string
                    description: "Success message"
            required:
                - message
        
        deleteAssetLinkResponse:
            type: object
            properties:
                message:
                    type: string
                    description: "Success message"
            required:
                - message
        
        assetNodeModel:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Asset ID"
                assetName:
                    type: string
                    description: "Asset name"
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID"
                assetLinkId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Asset link ID if applicable"
                assetLinkAliasId:
                    type: string
                    maxLength: 128
                    description: "Optional alias ID for the asset link. Only present for parentChild relationships with aliases."
            required:
                - assetId
                - assetName
                - databaseId
        
        assetTreeNodeModel:
            type: object
            properties:
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Asset ID"
                assetName:
                    type: string
                    description: "Asset name"
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID"
                assetLinkId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Asset link ID"
                assetLinkAliasId:
                    type: string
                    maxLength: 128
                    description: "Optional alias ID for the asset link. Only present for parentChild relationships with aliases."
                children:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetTreeNodeModel"
                    description: "Child nodes in the tree"
                    default: []
            required:
                - assetId
                - assetName
                - databaseId
                - assetLinkId
        
        unauthorizedCountsModel:
            type: object
            properties:
                related:
                    type: integer
                    description: "Count of unauthorized related assets"
                    default: 0
                parents:
                    type: integer
                    description: "Count of unauthorized parent assets"
                    default: 0
                children:
                    type: integer
                    description: "Count of unauthorized child assets"
                    default: 0
        
        getAssetLinksResponse:
            type: object
            properties:
                related:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetNodeModel"
                    description: "Related assets"
                    default: []
                parents:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetNodeModel"
                    description: "Parent assets"
                    default: []
                children:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetNodeModel"
                    description: "Child assets (flat list)"
                    default: []
                unauthorizedCounts:
                    $ref: "#/components/schemas/unauthorizedCountsModel"
                    description: "Counts of unauthorized assets"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - related
                - parents
                - children
                - unauthorizedCounts
        
        getAssetLinksTreeViewResponse:
            type: object
            properties:
                related:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetNodeModel"
                    description: "Related assets"
                    default: []
                parents:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetNodeModel"
                    description: "Parent assets"
                    default: []
                children:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetTreeNodeModel"
                    description: "Child assets (tree structure)"
                    default: []
                unauthorizedCounts:
                    $ref: "#/components/schemas/unauthorizedCountsModel"
                    description: "Counts of unauthorized assets"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - related
                - parents
                - children
                - unauthorizedCounts
        
        # Centralized Metadata Schemas (All Entity Types)
        metadataValueType:
            type: string
            enum: [string, multiline_string, inline_controlled_list, number, boolean, date, xyz, wxyz, matrix4x4, geopoint, geojson, lla, json]
            description: "Type of metadata value"
            default: "string"
        
        metadataItem:
            type: object
            properties:
                metadataKey:
                    type: string
                    minLength: 1
                    maxLength: 256
                    description: "Metadata key (1-256 characters)"
                metadataValue:
                    type: string
                    description: "Metadata value as string"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
            required:
                - metadataKey
                - metadataValue
        
        bulkMetadataItem:
            type: object
            properties:
                metadataKey:
                    type: string
                    minLength: 1
                    maxLength: 256
                    description: "Metadata key (1-256 characters) - used directly as primary key"
                metadataValue:
                    type: string
                    description: "Metadata value as string"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
            required:
                - metadataKey
                - metadataValue
        
        bulkMetadataOperationResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "True if at least one item succeeded"
                totalItems:
                    type: integer
                    description: "Total number of items in the request"
                successCount:
                    type: integer
                    description: "Number of items that succeeded"
                failureCount:
                    type: integer
                    description: "Number of items that failed"
                successfulItems:
                    type: array
                    items:
                        type: string
                    description: "List of metadata keys that succeeded"
                    default: []
                failedItems:
                    type: array
                    items:
                        type: object
                        properties:
                            key:
                                type: string
                                description: "Metadata key that failed"
                            error:
                                type: string
                                description: "Error message"
                    description: "List of failed items with error messages"
                    default: []
                message:
                    type: string
                    description: "Overall operation message"
                timestamp:
                    type: string
                    format: date-time
                    description: "Operation timestamp"
            required:
                - success
                - totalItems
                - successCount
                - failureCount
                - successfulItems
                - failedItems
                - message
                - timestamp
        
        # Asset Link Metadata Schemas
        createAssetLinkMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/metadataItem"
                    description: "List of metadata items to create (at least one required)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "relationship_strength"
                      metadataValue: "strong"
                      metadataValueType: "string"
                    - metadataKey: "confidence_score"
                      metadataValue: "0.95"
                      metadataValueType: "number"
        
        updateAssetLinkMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    maxItems: 500
                    items:
                        $ref: "#/components/schemas/bulkMetadataItem"
                    description: "List of metadata items to update (at least one required, max 500 for REPLACE_ALL mode)"
                updateType:
                    type: string
                    enum: [update, replace_all]
                    default: "update"
                    description: "Update mode: 'update' (default, upserts provided metadata) or 'replace_all' (replaces all metadata, requires PUT+POST+DELETE permissions, max 500 items)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "relationship_strength"
                      metadataValue: "very_strong"
                      metadataValueType: "string"
                updateType: "update"
        
        deleteAssetLinkMetadataRequest:
            type: object
            properties:
                metadataKeys:
                    type: array
                    minItems: 1
                    items:
                        type: string
                    description: "List of metadata keys to delete (at least one required)"
            required:
                - metadataKeys
            example:
                metadataKeys: ["relationship_strength", "confidence_score"]
        
        assetLinkMetadataModel:
            type: object
            properties:
                assetLinkId:
                    $ref: '#/components/schemas/uuid_regex'
                    description: "Asset link ID"
                metadataKey:
                    type: string
                    description: "Metadata key"
                metadataValue:
                    type: string
                    description: "Metadata value"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
                metadataSchemaField:
                    type: boolean
                    description: "Is this field defined in a schema?"
                    nullable: true
                metadataSchemaRequired:
                    type: boolean
                    description: "Is this field required per schema?"
                    nullable: true
                metadataSchemaDefaultValue:
                    type: string
                    description: "Default value from schema"
                    nullable: true
                metadataSchemaDependsOn:
                    type: string
                    description: "Field this depends on"
                    nullable: true
                metadataSchemaMultiFieldConflict:
                    type: boolean
                    description: "Multiple schemas define this field with conflicts"
                    nullable: true
                metadataSchemaControlledListKeys:
                    type: array
                    items:
                        type: string
                    description: "Controlled list values for INLINE_CONTROLLED_LIST type"
                    nullable: true
            required:
                - assetLinkId
                - metadataKey
                - metadataValue
                - metadataValueType
        
        getAssetLinkMetadataResponse:
            type: object
            properties:
                metadata:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetLinkMetadataModel"
                    description: "List of metadata for the asset link"
                    default: []
                restrictMetadataOutsideSchemas:
                    type: boolean
                    description: "True if either database restricts metadata outside schemas AND schemas exist for this entity type"
                NextToken:
                    type: string
                    description: "Pagination token for retrieving next page"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - metadata
                - restrictMetadataOutsideSchemas
        
        # Asset Metadata Schemas
        createAssetMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/metadataItem"
                    description: "List of metadata items to create (at least one required)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "project_name"
                      metadataValue: "Building Renovation"
                      metadataValueType: "string"
                    - metadataKey: "location"
                      metadataValue: '{"type":"Point","coordinates":[-122.4194,37.7749]}'
                      metadataValueType: "geopoint"
        
        updateAssetMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    maxItems: 500
                    items:
                        $ref: "#/components/schemas/bulkMetadataItem"
                    description: "List of metadata items to update (at least one required, max 500 for REPLACE_ALL mode)"
                updateType:
                    type: string
                    enum: [update, replace_all]
                    default: "update"
                    description: "Update mode: 'update' (default, upserts provided metadata) or 'replace_all' (replaces all metadata, requires PUT+POST+DELETE permissions, max 500 items)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "project_name"
                      metadataValue: "Building Renovation Phase 2"
                      metadataValueType: "string"
                updateType: "update"
        
        deleteAssetMetadataRequest:
            type: object
            properties:
                metadataKeys:
                    type: array
                    minItems: 1
                    items:
                        type: string
                    description: "List of metadata keys to delete (at least one required)"
            required:
                - metadataKeys
            example:
                metadataKeys: ["project_name", "location"]
        
        assetMetadataModel:
            type: object
            properties:
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID"
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Asset ID"
                metadataKey:
                    type: string
                    description: "Metadata key (used as primary key)"
                metadataValue:
                    type: string
                    description: "Metadata value"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
                metadataSchemaField:
                    type: boolean
                    description: "Is this field defined in a schema?"
                    nullable: true
                metadataSchemaRequired:
                    type: boolean
                    description: "Is this field required per schema?"
                    nullable: true
                metadataSchemaDefaultValue:
                    type: string
                    description: "Default value from schema"
                    nullable: true
                metadataSchemaDependsOn:
                    type: string
                    description: "Field this depends on"
                    nullable: true
                metadataSchemaMultiFieldConflict:
                    type: boolean
                    description: "Multiple schemas define this field with conflicts"
                    nullable: true
                metadataSchemaControlledListKeys:
                    type: array
                    items:
                        type: string
                    description: "Controlled list values for INLINE_CONTROLLED_LIST type"
                    nullable: true
            required:
                - databaseId
                - assetId
                - metadataKey
                - metadataValue
                - metadataValueType
        
        getAssetMetadataResponse:
            type: object
            properties:
                metadata:
                    type: array
                    items:
                        $ref: "#/components/schemas/assetMetadataModel"
                    description: "List of metadata for the asset"
                    default: []
                restrictMetadataOutsideSchemas:
                    type: boolean
                    description: "True if database restricts metadata outside schemas AND schemas exist for this entity type"
                NextToken:
                    type: string
                    description: "Pagination token for retrieving next page"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - metadata
                - restrictMetadataOutsideSchemas
        
        # File Metadata/Attribute Schemas
        createFileMetadataRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Relative file path (must not end with / for folders)"
                type:
                    type: string
                    enum: [metadata, attribute]
                    description: "Type: 'metadata' or 'attribute'. Attributes only support 'string' metadataValueType."
                metadata:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/metadataItem"
                    description: "List of metadata/attribute items to create (at least one required)"
            required:
                - filePath
                - type
                - metadata
            example:
                filePath: "models/building.obj"
                type: "metadata"
                metadata:
                    - metadataKey: "file_format_version"
                      metadataValue: "2.0"
                      metadataValueType: "string"
                    - metadataKey: "polygon_count"
                      metadataValue: "150000"
                      metadataValueType: "number"
        
        updateFileMetadataRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Relative file path (must not end with / for folders)"
                type:
                    type: string
                    enum: [metadata, attribute]
                    description: "Type: 'metadata' or 'attribute'. Attributes only support 'string' metadataValueType."
                metadata:
                    type: array
                    minItems: 1
                    maxItems: 500
                    items:
                        $ref: "#/components/schemas/bulkMetadataItem"
                    description: "List of metadata/attribute items to update (at least one required, max 500 for REPLACE_ALL mode)"
                updateType:
                    type: string
                    enum: [update, replace_all]
                    default: "update"
                    description: "Update mode: 'update' (default, upserts provided metadata) or 'replace_all' (replaces all metadata, requires PUT+POST+DELETE permissions, max 500 items)"
            required:
                - filePath
                - type
                - metadata
            example:
                filePath: "models/building.obj"
                type: "metadata"
                metadata:
                    - metadataKey: "polygon_count"
                      metadataValue: "175000"
                      metadataValueType: "number"
                updateType: "update"
        
        deleteFileMetadataRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Relative file path (must not end with / for folders)"
                type:
                    type: string
                    enum: [metadata, attribute]
                    description: "Type: 'metadata' or 'attribute'"
                metadataKeys:
                    type: array
                    minItems: 1
                    items:
                        type: string
                    description: "List of metadata/attribute keys to delete (at least one required)"
            required:
                - filePath
                - type
                - metadataKeys
            example:
                filePath: "models/building.obj"
                type: "metadata"
                metadataKeys: ["file_format_version", "polygon_count"]
        
        fileMetadataModel:
            type: object
            properties:
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID"
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Asset ID"
                filePath:
                    type: string
                    description: "Relative file path"
                metadataKey:
                    type: string
                    description: "Metadata key (or attributeKey for attributes) - used as primary key"
                metadataValue:
                    type: string
                    description: "Metadata value (or attributeValue for attributes)"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
                metadataSchemaField:
                    type: boolean
                    description: "Is this field defined in a schema?"
                    nullable: true
                metadataSchemaRequired:
                    type: boolean
                    description: "Is this field required per schema?"
                    nullable: true
                metadataSchemaDefaultValue:
                    type: string
                    description: "Default value from schema"
                    nullable: true
                metadataSchemaDependsOn:
                    type: string
                    description: "Field this depends on"
                    nullable: true
                metadataSchemaMultiFieldConflict:
                    type: boolean
                    description: "Multiple schemas define this field with conflicts"
                    nullable: true
                metadataSchemaControlledListKeys:
                    type: array
                    items:
                        type: string
                    description: "Controlled list values for INLINE_CONTROLLED_LIST type"
                    nullable: true
            required:
                - databaseId
                - assetId
                - filePath
                - metadataKey
                - metadataValue
                - metadataValueType
        
        getFileMetadataResponse:
            type: object
            properties:
                metadata:
                    type: array
                    items:
                        $ref: "#/components/schemas/fileMetadataModel"
                    description: "List of metadata/attributes for the file"
                    default: []
                restrictMetadataOutsideSchemas:
                    type: boolean
                    description: "True if database restricts metadata outside schemas AND schemas exist for this entity type"
                NextToken:
                    type: string
                    description: "Pagination token for retrieving next page"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - metadata
                - restrictMetadataOutsideSchemas
        
        # Database Metadata Schemas
        createDatabaseMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    items:
                        $ref: "#/components/schemas/metadataItem"
                    description: "List of metadata items to create (at least one required)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "organization"
                      metadataValue: "Engineering Department"
                      metadataValueType: "string"
                    - metadataKey: "data_classification"
                      metadataValue: "Internal"
                      metadataValueType: "string"
        
        updateDatabaseMetadataRequest:
            type: object
            properties:
                metadata:
                    type: array
                    minItems: 1
                    maxItems: 500
                    items:
                        $ref: "#/components/schemas/bulkMetadataItem"
                    description: "List of metadata items to update (at least one required, max 500 for REPLACE_ALL mode)"
                updateType:
                    type: string
                    enum: [update, replace_all]
                    default: "update"
                    description: "Update mode: 'update' (default, upserts provided metadata) or 'replace_all' (replaces all metadata, requires PUT+POST+DELETE permissions, max 500 items)"
            required:
                - metadata
            example:
                metadata:
                    - metadataKey: "organization"
                      metadataValue: "Engineering & Design Department"
                      metadataValueType: "string"
                updateType: "update"
        
        deleteDatabaseMetadataRequest:
            type: object
            properties:
                metadataKeys:
                    type: array
                    minItems: 1
                    items:
                        type: string
                    description: "List of metadata keys to delete (at least one required)"
            required:
                - metadataKeys
            example:
                metadataKeys: ["organization", "data_classification"]
        
        databaseMetadataModel:
            type: object
            properties:
                databaseId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Database ID"
                metadataKey:
                    type: string
                    description: "Metadata key (used as primary key)"
                metadataValue:
                    type: string
                    description: "Metadata value"
                metadataValueType:
                    $ref: "#/components/schemas/metadataValueType"
                metadataSchemaField:
                    type: boolean
                    description: "Is this field defined in a schema?"
                    nullable: true
                metadataSchemaRequired:
                    type: boolean
                    description: "Is this field required per schema?"
                    nullable: true
                metadataSchemaDefaultValue:
                    type: string
                    description: "Default value from schema"
                    nullable: true
                metadataSchemaDependsOn:
                    type: string
                    description: "Field this depends on"
                    nullable: true
                metadataSchemaMultiFieldConflict:
                    type: boolean
                    description: "Multiple schemas define this field with conflicts"
                    nullable: true
                metadataSchemaControlledListKeys:
                    type: array
                    items:
                        type: string
                    description: "Controlled list values for INLINE_CONTROLLED_LIST type"
                    nullable: true
            required:
                - databaseId
                - metadataKey
                - metadataValue
                - metadataValueType
        
        getDatabaseMetadataResponse:
            type: object
            properties:
                metadata:
                    type: array
                    items:
                        $ref: "#/components/schemas/databaseMetadataModel"
                    description: "List of metadata for the database"
                    default: []
                restrictMetadataOutsideSchemas:
                    type: boolean
                    description: "True if database restricts metadata outside schemas AND schemas exist for this entity type"
                NextToken:
                    type: string
                    description: "Pagination token for retrieving next page"
                message:
                    type: string
                    description: "Response message"
                    default: "Success"
            required:
                - metadata
                - restrictMetadataOutsideSchemas
        
        # Set Primary File Schemas
        setPrimaryFileRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Path to the file relative to the asset root"
                primaryType:
                    type: string
                    enum: ["", "primary", "lod1", "lod2", "lod3", "lod4", "lod5", "other"]
                    description: "Primary type for the file. Empty string removes the metadata."
                primaryTypeOther:
                    type: string
                    maxLength: 30
                    description: "Custom primary type when primaryType is 'other'"
            required:
                - filePath
                - primaryType
        
        setPrimaryFileResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                filePath:
                    type: string
                    description: "File path that was modified"
                primaryType:
                    type: string
                    description: "The primary type that was set (null if removed)"
            required:
                - success
                - message
                - filePath
                
        deleteAssetPreviewResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                assetId:
                    $ref: '#/components/schemas/id_regex'
                    description: "Asset ID whose preview was deleted"
            required:
                - success
                - message
                - assetId
                
        deleteAuxiliaryPreviewAssetFilesRequest:
            type: object
            properties:
                filePath:
                    type: string
                    description: "Path to the file or prefix relative to the asset root. Will be treated as a prefix for deletion."
            required:
                - filePath
                
        deleteAuxiliaryPreviewAssetFilesResponse:
            type: object
            properties:
                success:
                    type: boolean
                    description: "Whether the operation was successful"
                message:
                    type: string
                    description: "Message describing the result"
                filePath:
                    type: string
                    description: "File path or prefix that was used for deletion"
                deletedCount:
                    type: integer
                    description: "Number of auxiliary files deleted"
            required:
                - success
                - message
                - filePath
                - deletedCount
        
        # Search API Schemas
        simpleSearchRequest:
            type: object
            properties:
                query:
                    type: string
                    maxLength: 1000
                    description: "General keyword search across all fields"
                entityTypes:
                    type: array
                    items:
                        type: string
                        enum: [asset, file]
                    description: "Filter by entity type (default: both asset and file)"
                assetName:
                    type: string
                    maxLength: 256
                    description: "Search by asset name"
                assetId:
                    type: string
                    maxLength: 256
                    description: "Search by asset ID"
                assetType:
                    type: string
                    maxLength: 256
                    description: "Filter by asset type"
                fileKey:
                    type: string
                    maxLength: 1000
                    description: "Search by S3 file key"
                fileExtension:
                    type: string
                    maxLength: 50
                    description: "Filter by file extension (without leading dot)"
                databaseId:
                    type: string
                    maxLength: 256
                    description: "Filter by database ID"
                tags:
                    type: array
                    items:
                        type: string
                        maxLength: 256
                    description: "Search by tags"
                metadataKey:
                    type: string
                    maxLength: 256
                    description: "Search metadata field names"
                metadataValue:
                    type: string
                    maxLength: 1000
                    description: "Search metadata field values"
                includeArchived:
                    type: boolean
                    default: false
                    description: "Include archived items"
                from:
                    type: integer
                    minimum: 0
                    maximum: 10000
                    default: 0
                    description: "Starting offset for pagination"
                size:
                    type: integer
                    minimum: 1
                    maximum: 1000
                    default: 100
                    description: "Number of results to return"
            required: []
        
        searchRequest:
            type: object
            properties:
                query:
                    type: string
                    maxLength: 1000
                    description: "General text search query"
                tokens:
                    type: array
                    items:
                        $ref: "#/components/schemas/searchToken"
                    description: "Structured search tokens"
                filters:
                    type: array
                    items:
                        $ref: "#/components/schemas/searchFilter"
                    description: "Additional OpenSearch filters"
                sort:
                    type: array
                    items:
                        oneOf:
                            - type: string
                            - $ref: "#/components/schemas/searchSort"
                    description: "Sort configuration"
                operation:
                    type: string
                    enum: [AND, OR]
                    default: "AND"
                    description: "Default operation for tokens"
                entityTypes:
                    type: array
                    items:
                        type: string
                        enum: [asset, file]
                    description: "Filter by entity type"
                includeArchived:
                    type: boolean
                    default: false
                    description: "Include archived items"
                aggregations:
                    type: boolean
                    default: true
                    description: "Include aggregations in response"
                metadataQuery:
                    type: string
                    maxLength: 1000
                    description: "Separate metadata search query"
                metadataSearchMode:
                    type: string
                    enum: [key, value, both]
                    default: "both"
                    description: "Search metadata keys, values, or both"
                includeMetadataInSearch:
                    type: boolean
                    default: true
                    description: "Include metadata fields in general search"
                explainResults:
                    type: boolean
                    default: false
                    description: "Include match explanations"
                includeHighlights:
                    type: boolean
                    default: true
                    description: "Enhanced highlighting"
                from:
                    type: integer
                    minimum: 0
                    maximum: 10000
                    default: 0
                    description: "Starting offset for pagination"
                size:
                    type: integer
                    minimum: 1
                    maximum: 2000
                    default: 100
                    description: "Number of results to return"
            required: []
        
        searchToken:
            type: object
            properties:
                operation:
                    type: string
                    enum: [AND, OR]
                    default: "AND"
                operator:
                    type: string
                    enum: ["=", ":", "!=", "!:"]
                    default: "="
                propertyKey:
                    type: string
                    description: "Property key to search (null or 'all' for multi-field search)"
                value:
                    type: string
                    minLength: 1
                    description: "Search value"
            required:
                - value
        
        searchFilter:
            type: object
            properties:
                query_string:
                    type: object
                    additionalProperties:
                        type: string
                    description: "OpenSearch query_string filter"
            required:
                - query_string
        
        searchSort:
            type: object
            properties:
                field:
                    type: string
                    minLength: 1
                    description: "Field to sort by"
                order:
                    type: string
                    enum: [asc, desc]
                    default: "asc"
                    description: "Sort order"
            required:
                - field
        
        searchMappingsResponse:
            type: object
            properties:
                mappings:
                    type: object
                    properties:
                        asset_index:
                            type: object
                            description: "Asset index mappings"
                        file_index:
                            type: object
                            description: "File index mappings"
                    description: "Index mappings for both asset and file indexes"
            required:
                - mappings
        
        searchHitSource:
            type: object
            properties:
                _rectype:
                    type: string
                    enum: [asset, file]
                    description: "Record type"
                str_databaseid:
                    type: string
                    description: "Database ID"
                str_assetid:
                    type: string
                    description: "Asset ID"
                str_assetname:
                    type: string
                    description: "Asset name"
                str_key:
                    type: string
                    description: "S3 key for files"
                str_description:
                    type: string
                    description: "Asset description"
                str_assettype:
                    type: string
                    description: "Asset type"
                str_fileext:
                    type: string
                    description: "File extension"
                list_tags:
                    type: array
                    items:
                        type: string
                    description: "Tags associated with the item"
                bool_isdistributable:
                    type: boolean
                    description: "Whether asset is distributable"
                date_lastmodified:
                    type: string
                    format: date-time
                    description: "Last modified date"
                num_size:
                    type: integer
                    description: "File size in bytes"
                str_etag:
                    type: string
                    description: "S3 ETag"
                str_s3_version_id:
                    type: string
                    description: "S3 version ID"
                str_asset_version_id:
                    type: string
                    description: "Asset version ID"
                bool_archived:
                    type: boolean
                    description: "Whether item is archived"
            additionalProperties: true
            required:
                - _rectype
        
        searchHitExplanation:
            type: object
            properties:
                matched_fields:
                    type: array
                    items:
                        type: string
                    description: "Fields that matched the query"
                match_reasons:
                    type: object
                    additionalProperties:
                        type: string
                    description: "Field to reason mapping"
                query_type:
                    type: string
                    description: "Type of query (general, metadata, combined)"
                score_breakdown:
                    type: object
                    properties:
                        total_score:
                            type: number
                        field_matches:
                            type: integer
                        highlight_matches:
                            type: integer
            required:
                - matched_fields
                - match_reasons
                - query_type
        
        searchHit:
            type: object
            properties:
                _index:
                    type: string
                    description: "Index name"
                _id:
                    type: string
                    description: "Document ID"
                _score:
                    type: number
                    description: "Search relevance score"
                _source:
                    $ref: "#/components/schemas/searchHitSource"
                    description: "Source document data"
                highlight:
                    type: object
                    additionalProperties:
                        type: array
                        items:
                            type: string
                    description: "Highlighted text snippets"
                explanation:
                    $ref: "#/components/schemas/searchHitExplanation"
                    description: "Match explanation (if requested)"
            required:
                - _index
                - _id
                - _source
        
        searchHits:
            type: object
            properties:
                total:
                    type: object
                    properties:
                        value:
                            type: integer
                            description: "Total number of hits"
                        relation:
                            type: string
                            description: "Relation type (eq, gte)"
                    required:
                        - value
                max_score:
                    type: number
                    description: "Maximum score among hits"
                hits:
                    type: array
                    items:
                        $ref: "#/components/schemas/searchHit"
                    description: "Array of search hits"
            required:
                - total
                - hits
        
        aggregationBucket:
            type: object
            properties:
                key:
                    oneOf:
                        - type: string
                        - type: integer
                        - type: number
                    description: "Bucket key"
                doc_count:
                    type: integer
                    description: "Number of documents in bucket"
            required:
                - key
                - doc_count
        
        aggregation:
            type: object
            properties:
                doc_count:
                    type: integer
                    description: "Total document count"
                buckets:
                    type: array
                    items:
                        $ref: "#/components/schemas/aggregationBucket"
                    description: "Aggregation buckets"
        
        searchResponse:
            type: object
            properties:
                took:
                    type: integer
                    description: "Time taken in milliseconds"
                timed_out:
                    type: boolean
                    description: "Whether the search timed out"
                _shards:
                    type: object
                    properties:
                        total:
                            type: integer
                        successful:
                            type: integer
                        skipped:
                            type: integer
                        failed:
                            type: integer
                    description: "Shard information"
                hits:
                    $ref: "#/components/schemas/searchHits"
                    description: "Search results"
                aggregations:
                    type: object
                    additionalProperties:
                        $ref: "#/components/schemas/aggregation"
                    description: "Search aggregations"
            required:
                - took
                - timed_out
                - _shards
                - hits
    parameters:
      maxItemsParam:
        name: maxItems
        in: query
        description: "Max number of items that can be returned. Default is 1000"
        schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 1000
      pageSizeParam:
        name: pageSize
        in: query
        description: "Number of items to be returned per page. Default is 100"
        schema:
            type: integer
            minimum: 1
            maximum: 1000
      startingTokenParam:
        name: startingToken
        in: query
        description: "Number of items to be returned per page. Default is 100"
        schema:
            type: string
        allowEmptyValue: true