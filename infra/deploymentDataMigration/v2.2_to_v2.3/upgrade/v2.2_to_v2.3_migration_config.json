{
    "asset_storage_table_name": "YOUR_ASSET_STORAGE_TABLE_NAME",
    "s3_asset_buckets_table_name": "YOUR_S3_ASSET_BUCKETS_TABLE_NAME",
    "s3_object_created_sns_topic_arn": "YOUR_S3_OBJECT_CREATED_SNS_TOPIC_ARN",
    "opensearch_asset_index_ssm_param": "vams-assets-v1",
    "opensearch_file_index_ssm_param": "vams-files-v1",
    "opensearch_endpoint_ssm_param": "YOUR_OPENSEARCH_ENDPOINT_SSM_PARAM",
    "aws_profile": "YOUR_AWS_PROFILE",
    "aws_region": "YOUR_AWS_REGION",
    "reindex_settings": {
        "asset_batch_size": 25,
        "s3_batch_size": 100,
        "max_workers": 10,
        "sns_publish_delay": 0.05
    },
    "log_level": "INFO",
    "dry_run": false,
    "verification_wait_time": 300,
    "comments": [
        "=============================================================================",
        "VAMS v2.2 to v2.3 Migration Configuration",
        "=============================================================================",
        "",
        "This configuration file is used by the v2.2_to_v2.3_migration.py script",
        "which leverages the reusable reindex_utility.py for OpenSearch reindexing.",
        "",
        "REQUIRED CONFIGURATION:",
        "----------------------",
        "",
        "DynamoDB Tables:",
        "  - asset_storage_table_name: DynamoDB table containing asset records",
        "    Example: 'vams-prod-AssetStorageTable-ABC123'",
        "",
        "  - s3_asset_buckets_table_name: DynamoDB table containing S3 bucket configurations",
        "    Example: 'vams-prod-S3AssetBucketsTable-XYZ789'",
        "",
        "SNS Topic:",
        "  - s3_object_created_sns_topic_arn: ARN of SNS topic that file indexer subscribes to",
        "    Example: 'arn:aws:sns:us-east-1:123456789012:vams-prod-s3ObjectCreated'",
        "    IMPORTANT: This must be the same topic that triggers the file indexer Lambda",
        "",
        "SSM Parameters (for verification):",
        "  - opensearch_asset_index_ssm_param: SSM parameter storing asset index name",
        "    Example: '/vams-prod/aos/assetIndexName'",
        "",
        "  - opensearch_file_index_ssm_param: SSM parameter storing file index name",
        "    Example: '/vams-prod/aos/fileIndexName'",
        "",
        "  - opensearch_endpoint_ssm_param: SSM parameter storing OpenSearch endpoint",
        "    Example: '/vams-prod/aos/endPoint'",
        "",
        "AWS Settings:",
        "  - aws_profile: AWS CLI profile to use for authentication",
        "    Example: 'vams-prod' or 'default'",
        "",
        "  - aws_region: AWS region where resources are deployed",
        "    Example: 'us-east-1', 'us-west-2', etc.",
        "",
        "REINDEX SETTINGS:",
        "----------------",
        "",
        "  - asset_batch_size: Number of assets to update per DynamoDB batch (max 25)",
        "    Default: 25",
        "    Recommendation: Keep at 25 for optimal DynamoDB performance",
        "",
        "  - s3_batch_size: Number of S3 objects to process in each batch",
        "    Default: 100",
        "    Recommendation: Adjust based on bucket size and SNS rate limits",
        "",
        "  - max_workers: Maximum number of concurrent workers for parallel processing",
        "    Default: 10",
        "    Recommendation: Increase for faster processing, decrease if hitting rate limits",
        "",
        "  - sns_publish_delay: Delay between SNS publishes in seconds",
        "    Default: 0.05 (50ms)",
        "    Recommendation: Increase if hitting SNS rate limits (100 TPS default)",
        "",
        "MIGRATION SETTINGS:",
        "------------------",
        "",
        "  - log_level: Logging verbosity",
        "    Options: DEBUG, INFO, WARNING, ERROR, CRITICAL",
        "    Default: INFO",
        "",
        "  - dry_run: Set to true to test without making changes",
        "    Default: false",
        "    Recommendation: Always run with dry_run=true first to validate configuration",
        "",
        "  - verification_wait_time: Seconds to wait before verifying indexing completion",
        "    Default: 300 (5 minutes)",
        "    Recommendation: Increase for large datasets to allow indexing to complete",
        "",
        "MIGRATION PROCESS:",
        "-----------------",
        "",
        "The migration script performs the following steps:",
        "",
        "1. Asset Reindexing (FIRST):",
        "   - Scans asset_storage_table_name for all asset records",
        "   - Updates _os_reindex_date field with current timestamp",
        "   - This triggers the asset indexer to reindex assets in OpenSearch",
        "",
        "2. S3 File Reindexing (SECOND):",
        "   - Scans s3_asset_buckets_table_name for bucket/prefix configurations",
        "   - Lists all objects in each bucket/prefix combination",
        "   - Constructs S3 ObjectCreated notification events",
        "   - Publishes events to s3_object_created_sns_topic_arn",
        "   - File indexer Lambda processes events and indexes files",
        "",
        "3. Verification (if not dry_run):",
        "   - Waits verification_wait_time seconds for async indexing",
        "   - Queries OpenSearch indexes for document counts",
        "   - Compares actual vs expected document counts",
        "   - Generates detailed migration report",
        "",
        "USAGE EXAMPLES:",
        "---------------",
        "",
        "1. Dry run with config file:",
        "   python v2.2_to_v2.3_migration.py --config v2.2_to_v2.3_migration_config.json --dry-run",
        "",
        "2. Production run with config file:",
        "   python v2.2_to_v2.3_migration.py --config v2.2_to_v2.3_migration_config.json",
        "",
        "3. Test with limited items:",
        "   python v2.2_to_v2.3_migration.py --config v2.2_to_v2.3_migration_config.json --limit 100 --dry-run",
        "",
        "4. Override config with command line:",
        "   python v2.2_to_v2.3_migration.py --profile my-profile --asset-storage-table MyTable --dry-run",
        "",
        "IAM PERMISSIONS REQUIRED:",
        "------------------------",
        "",
        "The AWS credentials must have the following permissions:",
        "",
        "DynamoDB:",
        "  - dynamodb:Scan on asset_storage_table_name",
        "  - dynamodb:UpdateItem on asset_storage_table_name",
        "  - dynamodb:BatchWriteItem on asset_storage_table_name",
        "  - dynamodb:Scan on s3_asset_buckets_table_name",
        "",
        "S3:",
        "  - s3:ListBucket on all asset buckets",
        "  - s3:GetObject on all asset buckets",
        "  - s3:HeadObject on all asset buckets",
        "",
        "SNS:",
        "  - sns:Publish on s3_object_created_sns_topic_arn",
        "",
        "SSM:",
        "  - ssm:GetParameter on OpenSearch SSM parameters",
        "",
        "OpenSearch (for verification):",
        "  - es:ESHttpGet on OpenSearch domain (or aoss:APIAccessAll for Serverless)",
        "",
        "TROUBLESHOOTING:",
        "---------------",
        "",
        "1. Rate Limiting:",
        "   - Increase sns_publish_delay if hitting SNS rate limits",
        "   - Decrease max_workers if hitting DynamoDB or S3 rate limits",
        "",
        "2. Verification Failures:",
        "   - Increase verification_wait_time for large datasets",
        "   - Check CloudWatch logs for indexer Lambda errors",
        "   - Verify SNS topic ARN matches file indexer subscription",
        "",
        "3. Permission Errors:",
        "   - Verify IAM permissions listed above",
        "   - Check AWS profile has access to all required resources",
        "",
        "4. Configuration Errors:",
        "   - Verify all table names and ARNs are correct",
        "   - Test with --dry-run first",
        "   - Use --limit for testing with small datasets",
        "",
        "============================================================================="
    ]
}
